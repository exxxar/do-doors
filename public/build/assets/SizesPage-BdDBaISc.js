import{_ as nt}from"./AuthenticatedLayout--onUWIkO.js";import"./CalcForm-Y1AOtvLP.js";import{o as i,c,b as s,a as q,e as u,g as L,i as at,t as _,v as W,F as M,r as P,f as T,j as ct,d as E,m as tt,p as D,x as dt,y as J,z as ht,A as ut,B as pt,w as F,C as ft,D as mt,u as et,Z as bt}from"./app-BX3Ajolf.js";import{_ as vt}from"./MaterialTable-C73n2jO2.js";import{S as gt}from"./SizeControls-XgdC8tfD.js";import{P as _t}from"./Pagination-CoRcwqDP.js";import"./ApplicationLogo-DUCC7ib7.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./IndividualDataForm-Ci5qgmf1.js";import"./vue-the-mask-D__QHX62.js";import"./DoorItemEditor-Cd_MmBmB.js";import"./RalColorSelector-DWtL2sAO.js";import"./HandleDetail-RvxsTuzR.js";const yt={key:0,class:"row"},wt={class:"col-md-6 col-12"},$t={class:"row"},kt={class:"col-12 col-md-6"},Mt={class:"form-floating mb-3"},St=s("option",{value:"sizes"},"Размеры",-1),Yt=s("option",{value:"loops"},"Петли",-1),Lt=s("option",{value:"colors"},"Цвета",-1),Tt=s("option",{value:"depth"},"Толщина",-1),Xt=[St,Yt,Lt,Tt],Wt=s("label",{for:"floatingSelect"},"Выбор типа",-1),zt={key:0,class:"col-12 col-md-6"},Ct={class:"form-floating mb-3"},Ht={type:"button",class:"btn btn-outline-secondary rounded-0 w-100 p-3 text-left"},Rt=s("i",{class:"fa-solid fa-scroll mr-2"},null,-1),Et={key:1,class:"mb-2"},Pt=s("i",{class:"fa-solid fa-xmark ml-1 text-danger"},null,-1),At=[Pt],Dt={key:1,class:"col-12 col-md-6"},jt=s("div",{class:"card rounded-0"},[s("div",{class:"card-body"},[s("p",{class:"text-secondary"},"Выбор материала не предусмотрен")])],-1),Bt=[jt],Ot={class:"row"},It={class:"col-12 col-md-6"},Ut={class:"form-floating mb-3"},Vt=s("label",{for:"size-width"},"Ширина, см",-1),Nt={class:"col-12 col-md-6"},Ft={class:"form-floating mb-3"},Kt=s("label",{for:"size-height"},"Высота, см",-1),qt={class:"row"},Jt={class:"col-12 col-md-6"},Zt={class:"form-floating mb-3"},Gt=s("label",{for:"size-price-wholesale"},"Цена опт, руб",-1),Qt={class:"col-12 col-md-6"},xt={class:"form-floating mb-3"},te=s("label",{for:"size-price-dealer"},"Цена дилеру, руб",-1),ee={class:"col-12 col-md-6"},se={class:"form-floating mb-3"},oe=s("label",{for:"size-price-wholesale"},"Цена опт, руб",-1),le={class:"col-12 col-md-6"},ie={class:"form-floating mb-3"},re=s("label",{for:"size-price-retail"},"Цена розница, руб",-1),ne={class:"col-12 col-md-6"},ae={class:"form-floating mb-3"},ce=s("label",{for:"size-price-cost"},"Себестоимость, руб",-1),de={class:"col-12 col-md-6"},he={class:"form-floating mb-3"},ue=s("label",{for:"size-price-koef"},"Ценовой коэффициент",-1),pe={class:"col-12 col-md-6"},fe={key:0,class:"form-floating mb-3"},me=s("label",{for:"size-loops-count"},"Число петель",-1),be={key:1,class:"form-floating mb-3"},ve=s("label",{for:"size-loops-count"},"Толщина",-1),ge={key:2,class:"form-floating mb-3"},_e=s("label",{for:"size-loops-count"},"Цвет",-1),ye={class:"row mt-2"},we={class:"col-12"},$e={class:"alert alert-danger alert-dismissible fade show",role:"alert"},ke=s("strong",null,"Внимание!",-1),Me=["onClick"],Se={class:"row mt-5"},Ye={class:"col-12 d-flex justify-content-center"},Le=["disabled"],Te={key:0,class:"fa-regular fa-floppy-disk mr-1"},Xe={key:1,class:"spinner-border spinner-border-sm text-success",role:"status"},We=s("i",{class:"fa-solid fa-xmark mr-1"},null,-1),ze=["id"],Ce={class:"modal-dialog modal-md"},He={class:"modal-content rounded-0"},Re={class:"modal-body"},Ee=s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-outline-secondary rounded-0","data-bs-dismiss":"modal"},"Закрыть ")],-1),Pe={props:["item","needControls","id"],data(){return{tab:0,materialModal:null,messages:[],loading:!1,loadingMaterial:!1,selectedMaterial:null,form:{id:null,width:0,height:0,material_id:null,price:{wholesale:0,dealer:0,retail:0,cost:0},price_koef:0,value:null,type:"sizes"}}},watch:{"form.type":{handler(e){this.form.value=null},deep:!0}},computed:{needClearForm(){return this.form.id||this.form.width||this.form.height||this.form.size_id||this.form.price||this.form.price_koef||this.form.loops_count}},mounted(){this.materialModal=new bootstrap.Modal(document.getElementById(this.id+"-select-material-modal"),{}),this.item&&this.$nextTick(()=>{this.form={id:this.item.id||null,width:this.item.width||null,height:this.item.height||null,size_id:this.item.size_id||null,price:this.item.price||{wholesale:0,dealer:0,retail:0,cost:0},price_koef:this.item.price_koef||null,loops_count:this.item.loops_count||null,material_id:this.item.material_id||null,type:this.item.type||"sizes"},this.selectedMaterial=this.item.material||null})},methods:{removeSelectedMaterial(){this.selectedMaterial=null,this.form.material_id=null},openMaterialModal(){this.materialModal.show()},selectMaterial(e){this.materialModal.hide(),this.selectedMaterial=e,this.form.material_id=e.id,console.log("material",e),this.loadingMaterial=!0,this.$nextTick(()=>{this.loadingMaterial=!1})},alert(e){this.messages.push(e)},resetForm(){this.form={id:this.item.id||null,width:this.item.width||null,height:this.item.height||null,size_id:this.item.size_id||null,price:this.item.price||{wholesale:0,dealer:0,retail:0,cost:0},price_koef:this.item.price_koef||null,loops_count:this.item.loops_count||null},this.$emit("callback")},removeMessage(e){this.messages.splice(e,1)},submit(){let e=new FormData;Object.keys(this.form).forEach(t=>{const o=this.form[t]||"";typeof o=="object"?e.append(t,JSON.stringify(o)):e.append(t,o)}),this.$store.dispatch("storeSize",{sizeForm:e}).then(t=>{this.resetForm(),this.$emit("callback")}).catch(t=>{t.response?this.alert(t.response.data.message):this.alert("Ошибка")})}}},st=Object.assign(Pe,{__name:"SizeForm",setup(e){return(t,o)=>(i(),c(M,null,[e.needControls?(i(),c("div",yt,[s("div",wt,[q(gt)])])):u("",!0),s("form",{action:"",onSubmit:o[16]||(o[16]=ct((...l)=>t.submit&&t.submit(...l),["prevent"]))},[s("div",$t,[s("div",kt,[s("div",Mt,[L(s("select",{class:"form-select rounded-0",id:"floatingSelect","onUpdate:modelValue":o[0]||(o[0]=l=>t.form.type=l),"aria-label":"Floating label select example"},Xt,512),[[at,t.form.type]]),Wt])]),t.form.type==="sizes"||t.form.type==="loops"?(i(),c("div",zt,[s("div",Ct,[s("button",Ht,[Rt,t.selectedMaterial?u("",!0):(i(),c("span",{key:0,onClick:o[1]||(o[1]=(...l)=>t.openMaterialModal&&t.openMaterialModal(...l))}," Выберите материал")),t.selectedMaterial?(i(),c("span",Et,[s("strong",{onClick:o[2]||(o[2]=(...l)=>t.openMaterialModal&&t.openMaterialModal(...l))},_(t.selectedMaterial.title||"-"),1),s("a",{href:"javascript:void(0)",onClick:o[3]||(o[3]=(...l)=>t.removeSelectedMaterial&&t.removeSelectedMaterial(...l))},At)])):u("",!0)])])])):(i(),c("div",Dt,Bt))]),s("div",Ot,[s("div",It,[s("div",Ut,[L(s("input",{type:"number","onUpdate:modelValue":o[4]||(o[4]=l=>t.form.width=l),class:"form-control",id:"size-width",required:""},null,512),[[W,t.form.width]]),Vt])]),s("div",Nt,[s("div",Ft,[L(s("input",{type:"number","onUpdate:modelValue":o[5]||(o[5]=l=>t.form.height=l),class:"form-control",id:"size-height",required:""},null,512),[[W,t.form.height]]),Kt])])]),s("div",qt,[s("div",Jt,[s("div",Zt,[L(s("input",{type:"number","onUpdate:modelValue":o[6]||(o[6]=l=>t.form.price.wholesale=l),class:"form-control",id:"size-price-wholesale",required:""},null,512),[[W,t.form.price.wholesale]]),Gt])]),s("div",Qt,[s("div",xt,[L(s("input",{type:"number","onUpdate:modelValue":o[7]||(o[7]=l=>t.form.price.dealer=l),class:"form-control",id:"size-price-dealer",required:""},null,512),[[W,t.form.price.dealer]]),te])]),s("div",ee,[s("div",se,[L(s("input",{type:"number","onUpdate:modelValue":o[8]||(o[8]=l=>t.form.price.wholesale=l),class:"form-control",id:"size-price-wholesale",required:""},null,512),[[W,t.form.price.wholesale]]),oe])]),s("div",le,[s("div",ie,[L(s("input",{type:"number","onUpdate:modelValue":o[9]||(o[9]=l=>t.form.price.retail=l),class:"form-control",id:"size-price-retail",required:""},null,512),[[W,t.form.price.retail]]),re])]),s("div",ne,[s("div",ae,[L(s("input",{type:"number","onUpdate:modelValue":o[10]||(o[10]=l=>t.form.price.cost=l),class:"form-control",id:"size-price-cost",required:""},null,512),[[W,t.form.price.cost]]),ce])]),s("div",de,[s("div",he,[L(s("input",{type:"number","onUpdate:modelValue":o[11]||(o[11]=l=>t.form.price_koef=l),step:"0.1",class:"form-control",id:"size-price-koef",required:""},null,512),[[W,t.form.price_koef]]),ue])]),s("div",pe,[t.form.type==="loops"?(i(),c("div",fe,[L(s("input",{type:"text","onUpdate:modelValue":o[12]||(o[12]=l=>t.form.value=l),class:"form-control",id:"size-loops-count",placeholder:"name@example.com"},null,512),[[W,t.form.value]]),me])):u("",!0),t.form.type==="depth"?(i(),c("div",be,[L(s("input",{type:"number","onUpdate:modelValue":o[13]||(o[13]=l=>t.form.value=l),class:"form-control",id:"size-loops-count",placeholder:"name@example.com"},null,512),[[W,t.form.value]]),ve])):u("",!0),t.form.type==="colors"?(i(),c("div",ge,[L(s("input",{type:"text","onUpdate:modelValue":o[14]||(o[14]=l=>t.form.value=l),class:"form-control",id:"size-loops-count",placeholder:"name@example.com"},null,512),[[W,t.form.value]]),_e])):u("",!0)])]),s("div",ye,[s("div",we,[t.messages.length>0?(i(!0),c(M,{key:0},P(t.messages,(l,n)=>(i(),c("div",$e,[ke,T(" "+_(l||"Ошибка")+" ",1),s("button",{type:"button",class:"btn-close",onClick:d=>t.removeMessage(n)},null,8,Me)]))),256)):u("",!0)])]),s("div",Se,[s("div",Ye,[s("button",{disabled:!t.needClearForm||t.form.material_id==null,class:"btn btn-dark rounded-0"},[t.loading?(i(),c("span",Xe)):(i(),c("i",Te)),T(" Сохранить размер ")],8,Le),t.needClearForm&&!t.loading?(i(),c("button",{key:0,type:"button",onClick:o[15]||(o[15]=(...l)=>t.resetForm&&t.resetForm(...l)),class:"btn btn-outline-secondary rounded-0 ml-2"},[We,T(" Очистить форму ")])):u("",!0)])])],32),s("div",{style:{"z-index":"10200"},class:"modal fade",id:e.id+"-select-material-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[s("div",Ce,[s("div",He,[s("div",Re,[t.loadingMaterial?u("",!0):(i(),E(vt,{key:0,simple:!0,onSelect:t.selectMaterial},null,8,["onSelect"]))]),Ee])])],8,ze)],64))}});({...tt(["getMaterialsPaginateObject","getMaterials"])});const Ae={class:"row"},De={class:"col-12"},je={class:"input-group mb-3"},Be={class:"form-floating"},Oe=s("label",{for:"search-sizes"},"Поиск",-1),Ie=s("i",{class:"fa-solid fa-magnifying-glass"},null,-1),Ue=[Ie],Ve={class:"row"},Ne={class:"col-12"},Fe=s("h4",null,"Выбор типа данных",-1),Ke={class:"d-flex py-2"},qe={class:"d-flex scrollable-area"},Je={key:0,class:"table table-responsive"},Ze={key:0},Ge=s("i",{class:"fa-solid fa-caret-down"},null,-1),Qe=[Ge],xe={key:1},ts=s("i",{class:"fa-solid fa-caret-up"},null,-1),es=[ts],ss=s("th",{scope:"col",class:"text-center"},"Действие",-1),os={key:0},ls=s("i",{class:"fa-solid fa-caret-down"},null,-1),is=[ls],rs={key:1},ns=s("i",{class:"fa-solid fa-caret-up"},null,-1),as=[ns],cs={key:0},ds=s("i",{class:"fa-solid fa-caret-down"},null,-1),hs=[ds],us={key:1},ps=s("i",{class:"fa-solid fa-caret-up"},null,-1),fs=[ps],ms={key:0},bs=s("i",{class:"fa-solid fa-caret-down"},null,-1),vs=[bs],gs={key:1},_s=s("i",{class:"fa-solid fa-caret-up"},null,-1),ys=[_s],ws={key:0},$s=s("i",{class:"fa-solid fa-caret-down"},null,-1),ks=[$s],Ms={key:1},Ss=s("i",{class:"fa-solid fa-caret-up"},null,-1),Ys=[Ss],Ls={key:0},Ts=s("i",{class:"fa-solid fa-caret-down"},null,-1),Xs=[Ts],Ws={key:1},zs=s("i",{class:"fa-solid fa-caret-up"},null,-1),Cs=[zs],Hs={key:0},Rs=s("i",{class:"fa-solid fa-caret-down"},null,-1),Es=[Rs],Ps={key:1},As=s("i",{class:"fa-solid fa-caret-up"},null,-1),Ds=[As],js={key:0},Bs=s("i",{class:"fa-solid fa-caret-down"},null,-1),Os=[Bs],Is={key:1},Us=s("i",{class:"fa-solid fa-caret-up"},null,-1),Vs=[Us],Ns={scope:"row"},Fs={class:"text-center"},Ks={class:"dropdown"},qs=s("button",{class:"btn btn-link",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-bars"})],-1),Js={class:"dropdown-menu"},Zs=["onClick"],Gs=s("i",{class:"fa-solid fa-pen mr-2"},null,-1),Qs=["onClick"],xs=s("i",{class:"fa-regular fa-copy mr-2"},null,-1),to=["onClick"],eo=s("i",{class:"fa-solid fa-trash-can mr-2"},null,-1),so=["onClick"],oo=["onClick"],lo={class:"text-center"},io=s("thead",null,[s("th",null,"опт"),s("th",null,"дилер"),s("th",null,"розница"),s("th",null,"себестоимость")],-1),ro={style:{"min-width":"100px","text-align":"center"}},no={style:{"min-width":"100px","text-align":"center"}},ao={style:{"min-width":"100px","text-align":"center"}},co={style:{"min-width":"100px","text-align":"center"}},ho={class:"text-center"},uo=["onClick"],po=["onBlur","onChange","onUpdate:modelValue"],fo={class:"text-center"},mo={key:0},bo={key:1},vo={key:2},go={key:3},_o={class:"text-center"},yo={class:"text-center"},wo={key:0},$o={key:1},ko={key:0,class:"alert alert-success my-3",role:"alert"},Mo=s("h4",{class:"alert-heading"},"Размеры",-1),So=s("p",null,"К сожалению, раздел размеров пуст. Вы еще не добавили ни одного размера, который можно отобразить на этой странице.",-1),Yo=s("hr",null,null,-1),Lo=s("p",{class:"mb-0"},"Воспользуйтесь формой выше и добавьте свой первый размер",-1),To=[Mo,So,Yo,Lo],Xo={key:1,class:"row mb-3"},Wo={class:"col-12"},zo={class:"modal fade",id:"size-editor-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Co={class:"modal-dialog modal-lg"},Ho={class:"modal-content rounded-0"},Ro={class:"modal-body"},Eo={data(){return{sort:{column:null,direction:"desc",type:"sizes"},editor_modal:null,selected_item:null,search:null,current_page:0,paginate_object:null,items:[]}},computed:{...tt(["getSizesPaginateObject","getSizes"])},watch:{"sort.type":{handler:function(e){this.loadSizes()},deep:!0}},mounted(){this.loadSizes(),this.editor_modal=new bootstrap.Modal(document.getElementById("size-editor-modal"),{}),window.addEventListener("load-sizes",()=>{this.loadSizes()})},methods:{saveFormattedSizes(){this.$store.dispatch("loadFormattedSizeTable").then(e=>{this.confirmModal.hide(),this.loadSizes(),this.$notify({title:"DoDoors",text:"Вы успешно обновили данные"})}).catch(()=>{this.$notify({title:"DoDoors",text:"Ошибка обновления данных",type:"error"})})},sortAndLoad(e){this.sort.column=e,this.sort.direction=this.sort.direction==="desc"?"asc":"desc",this.loadSizes(this.current_page)},loadSizes(e=0){this.current_page=e,this.$store.dispatch("loadSizes",{dataObject:{search:this.search,order:this.sort.column,type:this.sort.type,direction:this.sort.direction},page:this.current_page}).then(t=>{this.items=this.getSizes,this.paginate_object=this.getSizesPaginateObject}).catch(()=>{this.loading=!1})},selectItem(e){if(e==null){this.selected_item=null,this.editor_modal.hide();return}this.selected_item=null,this.$nextTick(()=>{this.selected_item=e,this.editor_modal.show()})},duplicateItem(e){this.$store.dispatch("duplicateSize",{sizeId:e}).then(()=>{this.sortAndLoad("id")})},removeItem(e){this.$store.dispatch("removeSize",{sizeId:e}).then(()=>{this.sortAndLoad("id")})},blurParams(e,t){this.items[t].need_edit_wholesale_price=!1,this.items[t].need_edit_dealer_price=!1,this.items[t].need_edit_retail_price=!1,this.items[t].need_edit_cost_price=!1,this.items[t].need_edit_koef=!1},saveParam(e,t){this.$store.dispatch("updateSizeParam",{dataObject:{id:this.items[t].id,key:e,value:this.items[t][e]}}).then(o=>{this.items[t].need_edit_wholesale_price=!1,this.items[t].need_edit_dealer_price=!1,this.items[t].need_edit_retail_price=!1,this.items[t].need_edit_cost_price=!1,this.items[t].need_edit_koef=!1,this.$notify({title:"DoDoors",text:"Параметры успешно обновлены"})}).catch(()=>{})}}},Po=Object.assign(Eo,{__name:"SizeTable",setup(e){return(t,o)=>(i(),c(M,null,[s("form",Ae,[s("div",De,[s("div",je,[s("div",Be,[L(s("input",{type:"search","onUpdate:modelValue":o[0]||(o[0]=l=>t.search=l),class:"form-control",id:"search-sizes"},null,512),[[W,t.search]]),Oe]),s("button",{onClick:o[1]||(o[1]=l=>t.sortAndLoad("id")),type:"button",class:"btn btn-outline-secondary rounded-0"},Ue)])])]),s("div",Ve,[s("div",Ne,[Fe,s("div",Ke,[s("button",{class:D([{"btn-dark text-white":t.sort.type===null},"btn btn-outline-secondary mr-2 rounded-0"]),onClick:o[2]||(o[2]=l=>t.sort.type=null)},"Всё ",2),s("button",{class:D([{"btn-dark text-white":t.sort.type==="sizes"},"btn btn-outline-secondary mr-2 rounded-0"]),onClick:o[3]||(o[3]=l=>t.sort.type="sizes")},"Размеры ",2),s("button",{class:D([{"btn-dark text-white":t.sort.type==="loops"},"btn btn-outline-secondary mr-2 rounded-0"]),onClick:o[4]||(o[4]=l=>t.sort.type="loops")},"Петли ",2),s("button",{class:D([{"btn-dark text-white":t.sort.type==="colors"},"btn btn-outline-secondary mr-2 rounded-0"]),onClick:o[5]||(o[5]=l=>t.sort.type="colors")},"Цвет ",2),s("button",{class:D([{"btn-dark text-white":t.sort.type==="depth"},"btn btn-outline-secondary mr-2 rounded-0"]),onClick:o[6]||(o[6]=l=>t.sort.type="depth")},"Толщина ",2)])])]),s("div",qe,[t.items.length>0?(i(),c("table",Je,[s("thead",null,[s("tr",null,[s("th",{scope:"col",class:"cursor-pointer",onClick:o[7]||(o[7]=l=>t.sortAndLoad("id"))},[T("# "),t.sort.direction==="desc"&&t.sort.column==="id"?(i(),c("span",Ze,Qe)):u("",!0),t.sort.direction==="asc"&&t.sort.column==="id"?(i(),c("span",xe,es)):u("",!0)]),ss,s("th",{scope:"col",class:"text-center cursor-pointer",onClick:o[8]||(o[8]=l=>t.sortAndLoad("width"))},[T("Ширина, см "),t.sort.direction==="desc"&&t.sort.column==="width"?(i(),c("span",os,is)):u("",!0),t.sort.direction==="asc"&&t.sort.column==="width"?(i(),c("span",rs,as)):u("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:o[9]||(o[9]=l=>t.sortAndLoad("height"))},[T("Высота, см "),t.sort.direction==="desc"&&t.sort.column==="height"?(i(),c("span",cs,hs)):u("",!0),t.sort.direction==="asc"&&t.sort.column==="height"?(i(),c("span",us,fs)):u("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:o[10]||(o[10]=l=>t.sortAndLoad("price"))},[T("Цена, руб "),t.sort.direction==="desc"&&t.sort.column==="price"?(i(),c("span",ms,vs)):u("",!0),t.sort.direction==="asc"&&t.sort.column==="price"?(i(),c("span",gs,ys)):u("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:o[11]||(o[11]=l=>t.sortAndLoad("price_koef"))},[T("Ценовой коэффициент "),t.sort.direction==="desc"&&t.sort.column==="price_koef"?(i(),c("span",ws,ks)):u("",!0),t.sort.direction==="asc"&&t.sort.column==="price_koef"?(i(),c("span",Ms,Ys)):u("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:o[12]||(o[12]=l=>t.sortAndLoad("type"))},[T("Тип данных "),t.sort.direction==="desc"&&t.sort.column==="type"?(i(),c("span",Ls,Xs)):u("",!0),t.sort.direction==="asc"&&t.sort.column==="type"?(i(),c("span",Ws,Cs)):u("",!0)]),s("th",{scope:"col",class:"text-center cursor-pointer",onClick:o[13]||(o[13]=l=>t.sortAndLoad("value"))},[T("Значение параметра "),t.sort.direction==="desc"&&t.sort.column==="value"?(i(),c("span",Hs,Es)):u("",!0),t.sort.direction==="asc"&&t.sort.column==="value"?(i(),c("span",Ps,Ds)):u("",!0)]),s("th",{scope:"col",class:"text-center",onClick:o[14]||(o[14]=l=>t.sortAndLoad("material_id"))},[T("Материал "),t.sort.direction==="desc"&&t.sort.column==="material_id"?(i(),c("span",js,Os)):u("",!0),t.sort.direction==="asc"&&t.sort.column==="material_id"?(i(),c("span",Is,Vs)):u("",!0)])])]),s("tbody",null,[(i(!0),c(M,null,P(t.items,(l,n)=>(i(),c("tr",null,[s("th",Ns,_(l.id||n),1),s("td",Fs,[s("div",Ks,[qs,s("ul",Js,[s("li",null,[s("a",{class:"dropdown-item",onClick:d=>t.selectItem(l),href:"javascript:void(0)"},[Gs,T("Редактировать")],8,Zs)]),s("li",null,[s("a",{class:"dropdown-item",onClick:d=>t.duplicateItem(l.id),href:"javascript:void(0)"},[xs,T("Дублировать")],8,Qs)]),s("li",null,[s("a",{class:"dropdown-item text-danger",onClick:d=>t.removeItem(l.id),href:"javascript:void(0)"},[eo,T("Удалить")],8,to)])])])]),s("td",{class:"text-center",onClick:d=>t.selectItem(l)},_(l.width||0),9,so),s("td",{class:"text-center",onClick:d=>t.selectItem(l)},_(l.height||0),9,oo),s("td",lo,[s("table",null,[io,s("tbody",null,[s("tr",null,[s("td",ro,_(t.items[n].price.wholesale||0),1),s("td",no,_(t.items[n].price.dealer||0),1),s("td",ao,_(t.items[n].price.retail||0),1),s("td",co,_(t.items[n].price.cost||0),1)])])])]),s("td",ho,[t.items[n].need_edit_koef?u("",!0):(i(),c("p",{key:0,onClick:d=>t.items[n].need_edit_koef=!0},_(t.items[n].price_koef||0),9,uo)),t.items[n].need_edit_koef?L((i(),c("input",{key:1,type:"number",step:"0.1",min:"0",onBlur:d=>t.blurParams("price_koef",n),onChange:d=>t.saveParam("price_koef",n),"onUpdate:modelValue":d=>t.items[n].price_koef=d,class:"form-control text-center",id:"floatingInput",placeholder:"name@example.com"},null,40,po)),[[W,t.items[n].price_koef]]):u("",!0)]),s("td",fo,[l.type==="sizes"?(i(),c("span",mo,"Размеры")):u("",!0),l.type==="loops"?(i(),c("span",bo,"Петли")):u("",!0),l.type==="colors"?(i(),c("span",vo,"Цвета")):u("",!0),l.type==="depth"?(i(),c("span",go,"Толщина")):u("",!0)]),s("td",_o,_(l.loops_count||0),1),s("td",yo,[l.material?(i(),c("p",wo,_(l.material.title||"-")+" (#"+_(l.material_id||"-")+") ",1)):(i(),c("p",$o,"Материал не выбран"))])]))),256))])])):u("",!0)]),t.items.length===0?(i(),c("div",ko,To)):u("",!0),t.items.length>0?(i(),c("div",Xo,[s("div",Wo,[t.paginate_object?(i(),E(_t,{key:0,onPagination_page:t.loadSizes,pagination:t.paginate_object},null,8,["onPagination_page","pagination"])):u("",!0)])])):u("",!0),s("div",zo,[s("div",Co,[s("div",Ho,[s("div",Ro,[t.selected_item?(i(),E(st,{key:0,id:"size-form-2",item:t.selected_item,onCallback:o[15]||(o[15]=l=>t.selectItem(null))},null,8,["item"])):u("",!0)])])])])],64))}});/*!
 * perfect-scrollbar v1.5.3
 * Copyright 2021 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function C(e){return getComputedStyle(e)}function X(e,t){for(var o in t){var l=t[o];typeof l=="number"&&(l=l+"px"),e.style[o]=l}return e}function V(e){var t=document.createElement("div");return t.className=e,t}var Z=typeof Element<"u"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function R(e,t){if(!Z)throw new Error("No element matching method supported");return Z.call(e,t)}function B(e){e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)}function G(e,t){return Array.prototype.filter.call(e.children,function(o){return R(o,t)})}var w={main:"ps",rtl:"ps__rtl",element:{thumb:function(e){return"ps__thumb-"+e},rail:function(e){return"ps__rail-"+e},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(e){return"ps--active-"+e},scrolling:function(e){return"ps--scrolling-"+e}}},ot={x:null,y:null};function lt(e,t){var o=e.element.classList,l=w.state.scrolling(t);o.contains(l)?clearTimeout(ot[t]):o.add(l)}function it(e,t){ot[t]=setTimeout(function(){return e.isAlive&&e.element.classList.remove(w.state.scrolling(t))},e.settings.scrollingThreshold)}function Ao(e,t){lt(e,t),it(e,t)}var I=function(t){this.element=t,this.handlers={}},rt={isEmpty:{configurable:!0}};I.prototype.bind=function(t,o){typeof this.handlers[t]>"u"&&(this.handlers[t]=[]),this.handlers[t].push(o),this.element.addEventListener(t,o,!1)};I.prototype.unbind=function(t,o){var l=this;this.handlers[t]=this.handlers[t].filter(function(n){return o&&n!==o?!0:(l.element.removeEventListener(t,n,!1),!1)})};I.prototype.unbindAll=function(){for(var t in this.handlers)this.unbind(t)};rt.isEmpty.get=function(){var e=this;return Object.keys(this.handlers).every(function(t){return e.handlers[t].length===0})};Object.defineProperties(I.prototype,rt);var O=function(){this.eventElements=[]};O.prototype.eventElement=function(t){var o=this.eventElements.filter(function(l){return l.element===t})[0];return o||(o=new I(t),this.eventElements.push(o)),o};O.prototype.bind=function(t,o,l){this.eventElement(t).bind(o,l)};O.prototype.unbind=function(t,o,l){var n=this.eventElement(t);n.unbind(o,l),n.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(n),1)};O.prototype.unbindAll=function(){this.eventElements.forEach(function(t){return t.unbindAll()}),this.eventElements=[]};O.prototype.once=function(t,o,l){var n=this.eventElement(t),d=function(r){n.unbind(o,d),l(r)};n.bind(o,d)};function N(e){if(typeof window.CustomEvent=="function")return new CustomEvent(e);var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,void 0),t}function K(e,t,o,l,n){l===void 0&&(l=!0),n===void 0&&(n=!1);var d;if(t==="top")d=["contentHeight","containerHeight","scrollTop","y","up","down"];else if(t==="left")d=["contentWidth","containerWidth","scrollLeft","x","left","right"];else throw new Error("A proper axis should be provided");Do(e,o,d,l,n)}function Do(e,t,o,l,n){var d=o[0],r=o[1],h=o[2],a=o[3],p=o[4],m=o[5];l===void 0&&(l=!0),n===void 0&&(n=!1);var $=e.element;e.reach[a]=null,$[h]<1&&(e.reach[a]="start"),$[h]>e[d]-e[r]-1&&(e.reach[a]="end"),t&&($.dispatchEvent(N("ps-scroll-"+a)),t<0?$.dispatchEvent(N("ps-scroll-"+p)):t>0&&$.dispatchEvent(N("ps-scroll-"+m)),l&&Ao(e,a)),e.reach[a]&&(t||n)&&$.dispatchEvent(N("ps-"+a+"-reach-"+e.reach[a]))}function y(e){return parseInt(e,10)||0}function jo(e){return R(e,"input,[contenteditable]")||R(e,"select,[contenteditable]")||R(e,"textarea,[contenteditable]")||R(e,"button,[contenteditable]")}function Bo(e){var t=C(e);return y(t.width)+y(t.paddingLeft)+y(t.paddingRight)+y(t.borderLeftWidth)+y(t.borderRightWidth)}var j={isWebKit:typeof document<"u"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window<"u"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator<"u"&&navigator.msMaxTouchPoints,isChrome:typeof navigator<"u"&&/Chrome/i.test(navigator&&navigator.userAgent)};function H(e){var t=e.element,o=Math.floor(t.scrollTop),l=t.getBoundingClientRect();e.containerWidth=Math.round(l.width),e.containerHeight=Math.round(l.height),e.contentWidth=t.scrollWidth,e.contentHeight=t.scrollHeight,t.contains(e.scrollbarXRail)||(G(t,w.element.rail("x")).forEach(function(n){return B(n)}),t.appendChild(e.scrollbarXRail)),t.contains(e.scrollbarYRail)||(G(t,w.element.rail("y")).forEach(function(n){return B(n)}),t.appendChild(e.scrollbarYRail)),!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.railXRatio=e.containerWidth/e.railXWidth,e.scrollbarXWidth=Q(e,y(e.railXWidth*e.containerWidth/e.contentWidth)),e.scrollbarXLeft=y((e.negativeScrollAdjustment+t.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):e.scrollbarXActive=!1,!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.railYRatio=e.containerHeight/e.railYHeight,e.scrollbarYHeight=Q(e,y(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=y(o*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):e.scrollbarYActive=!1,e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth),e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight),Oo(t,e),e.scrollbarXActive?t.classList.add(w.state.active("x")):(t.classList.remove(w.state.active("x")),e.scrollbarXWidth=0,e.scrollbarXLeft=0,t.scrollLeft=e.isRtl===!0?e.contentWidth:0),e.scrollbarYActive?t.classList.add(w.state.active("y")):(t.classList.remove(w.state.active("y")),e.scrollbarYHeight=0,e.scrollbarYTop=0,t.scrollTop=0)}function Q(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function Oo(e,t){var o={width:t.railXWidth},l=Math.floor(e.scrollTop);t.isRtl?o.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:o.left=e.scrollLeft,t.isScrollbarXUsingBottom?o.bottom=t.scrollbarXBottom-l:o.top=t.scrollbarXTop+l,X(t.scrollbarXRail,o);var n={top:l,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?n.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth-9:n.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth*2-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:n.left=t.scrollbarYLeft+e.scrollLeft,X(t.scrollbarYRail,n),X(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),X(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}function Io(e){e.element,e.event.bind(e.scrollbarY,"mousedown",function(t){return t.stopPropagation()}),e.event.bind(e.scrollbarYRail,"mousedown",function(t){var o=t.pageY-window.pageYOffset-e.scrollbarYRail.getBoundingClientRect().top,l=o>e.scrollbarYTop?1:-1;e.element.scrollTop+=l*e.containerHeight,H(e),t.stopPropagation()}),e.event.bind(e.scrollbarX,"mousedown",function(t){return t.stopPropagation()}),e.event.bind(e.scrollbarXRail,"mousedown",function(t){var o=t.pageX-window.pageXOffset-e.scrollbarXRail.getBoundingClientRect().left,l=o>e.scrollbarXLeft?1:-1;e.element.scrollLeft+=l*e.containerWidth,H(e),t.stopPropagation()})}function Uo(e){x(e,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),x(e,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])}function x(e,t){var o=t[0],l=t[1],n=t[2],d=t[3],r=t[4],h=t[5],a=t[6],p=t[7],m=t[8],$=e.element,k=null,S=null,f=null;function g(b){b.touches&&b.touches[0]&&(b[n]=b.touches[0].pageY),$[a]=k+f*(b[n]-S),lt(e,p),H(e),b.stopPropagation(),b.type.startsWith("touch")&&b.changedTouches.length>1&&b.preventDefault()}function Y(){it(e,p),e[m].classList.remove(w.state.clicking),e.event.unbind(e.ownerDocument,"mousemove",g)}function v(b,z){k=$[a],z&&b.touches&&(b[n]=b.touches[0].pageY),S=b[n],f=(e[l]-e[o])/(e[d]-e[h]),z?e.event.bind(e.ownerDocument,"touchmove",g):(e.event.bind(e.ownerDocument,"mousemove",g),e.event.once(e.ownerDocument,"mouseup",Y),b.preventDefault()),e[m].classList.add(w.state.clicking),b.stopPropagation()}e.event.bind(e[r],"mousedown",function(b){v(b)}),e.event.bind(e[r],"touchstart",function(b){v(b,!0)})}function Vo(e){var t=e.element,o=function(){return R(t,":hover")},l=function(){return R(e.scrollbarX,":focus")||R(e.scrollbarY,":focus")};function n(d,r){var h=Math.floor(t.scrollTop);if(d===0){if(!e.scrollbarYActive)return!1;if(h===0&&r>0||h>=e.contentHeight-e.containerHeight&&r<0)return!e.settings.wheelPropagation}var a=t.scrollLeft;if(r===0){if(!e.scrollbarXActive)return!1;if(a===0&&d<0||a>=e.contentWidth-e.containerWidth&&d>0)return!e.settings.wheelPropagation}return!0}e.event.bind(e.ownerDocument,"keydown",function(d){if(!(d.isDefaultPrevented&&d.isDefaultPrevented()||d.defaultPrevented)&&!(!o()&&!l())){var r=document.activeElement?document.activeElement:e.ownerDocument.activeElement;if(r){if(r.tagName==="IFRAME")r=r.contentDocument.activeElement;else for(;r.shadowRoot;)r=r.shadowRoot.activeElement;if(jo(r))return}var h=0,a=0;switch(d.which){case 37:d.metaKey?h=-e.contentWidth:d.altKey?h=-e.containerWidth:h=-30;break;case 38:d.metaKey?a=e.contentHeight:d.altKey?a=e.containerHeight:a=30;break;case 39:d.metaKey?h=e.contentWidth:d.altKey?h=e.containerWidth:h=30;break;case 40:d.metaKey?a=-e.contentHeight:d.altKey?a=-e.containerHeight:a=-30;break;case 32:d.shiftKey?a=e.containerHeight:a=-e.containerHeight;break;case 33:a=e.containerHeight;break;case 34:a=-e.containerHeight;break;case 36:a=e.contentHeight;break;case 35:a=-e.contentHeight;break;default:return}e.settings.suppressScrollX&&h!==0||e.settings.suppressScrollY&&a!==0||(t.scrollTop-=a,t.scrollLeft+=h,H(e),n(h,a)&&d.preventDefault())}})}function No(e){var t=e.element;function o(r,h){var a=Math.floor(t.scrollTop),p=t.scrollTop===0,m=a+t.offsetHeight===t.scrollHeight,$=t.scrollLeft===0,k=t.scrollLeft+t.offsetWidth===t.scrollWidth,S;return Math.abs(h)>Math.abs(r)?S=p||m:S=$||k,S?!e.settings.wheelPropagation:!0}function l(r){var h=r.deltaX,a=-1*r.deltaY;return(typeof h>"u"||typeof a>"u")&&(h=-1*r.wheelDeltaX/6,a=r.wheelDeltaY/6),r.deltaMode&&r.deltaMode===1&&(h*=10,a*=10),h!==h&&a!==a&&(h=0,a=r.wheelDelta),r.shiftKey?[-a,-h]:[h,a]}function n(r,h,a){if(!j.isWebKit&&t.querySelector("select:focus"))return!0;if(!t.contains(r))return!1;for(var p=r;p&&p!==t;){if(p.classList.contains(w.element.consuming))return!0;var m=C(p);if(a&&m.overflowY.match(/(scroll|auto)/)){var $=p.scrollHeight-p.clientHeight;if($>0&&(p.scrollTop>0&&a<0||p.scrollTop<$&&a>0))return!0}if(h&&m.overflowX.match(/(scroll|auto)/)){var k=p.scrollWidth-p.clientWidth;if(k>0&&(p.scrollLeft>0&&h<0||p.scrollLeft<k&&h>0))return!0}p=p.parentNode}return!1}function d(r){var h=l(r),a=h[0],p=h[1];if(!n(r.target,a,p)){var m=!1;e.settings.useBothWheelAxes?e.scrollbarYActive&&!e.scrollbarXActive?(p?t.scrollTop-=p*e.settings.wheelSpeed:t.scrollTop+=a*e.settings.wheelSpeed,m=!0):e.scrollbarXActive&&!e.scrollbarYActive&&(a?t.scrollLeft+=a*e.settings.wheelSpeed:t.scrollLeft-=p*e.settings.wheelSpeed,m=!0):(t.scrollTop-=p*e.settings.wheelSpeed,t.scrollLeft+=a*e.settings.wheelSpeed),H(e),m=m||o(a,p),m&&!r.ctrlKey&&(r.stopPropagation(),r.preventDefault())}}typeof window.onwheel<"u"?e.event.bind(t,"wheel",d):typeof window.onmousewheel<"u"&&e.event.bind(t,"mousewheel",d)}function Fo(e){if(!j.supportsTouch&&!j.supportsIePointer)return;var t=e.element;function o(f,g){var Y=Math.floor(t.scrollTop),v=t.scrollLeft,b=Math.abs(f),z=Math.abs(g);if(z>b){if(g<0&&Y===e.contentHeight-e.containerHeight||g>0&&Y===0)return window.scrollY===0&&g>0&&j.isChrome}else if(b>z&&(f<0&&v===e.contentWidth-e.containerWidth||f>0&&v===0))return!0;return!0}function l(f,g){t.scrollTop-=g,t.scrollLeft-=f,H(e)}var n={},d=0,r={},h=null;function a(f){return f.targetTouches?f.targetTouches[0]:f}function p(f){return f.pointerType&&f.pointerType==="pen"&&f.buttons===0?!1:!!(f.targetTouches&&f.targetTouches.length===1||f.pointerType&&f.pointerType!=="mouse"&&f.pointerType!==f.MSPOINTER_TYPE_MOUSE)}function m(f){if(p(f)){var g=a(f);n.pageX=g.pageX,n.pageY=g.pageY,d=new Date().getTime(),h!==null&&clearInterval(h)}}function $(f,g,Y){if(!t.contains(f))return!1;for(var v=f;v&&v!==t;){if(v.classList.contains(w.element.consuming))return!0;var b=C(v);if(Y&&b.overflowY.match(/(scroll|auto)/)){var z=v.scrollHeight-v.clientHeight;if(z>0&&(v.scrollTop>0&&Y<0||v.scrollTop<z&&Y>0))return!0}if(g&&b.overflowX.match(/(scroll|auto)/)){var A=v.scrollWidth-v.clientWidth;if(A>0&&(v.scrollLeft>0&&g<0||v.scrollLeft<A&&g>0))return!0}v=v.parentNode}return!1}function k(f){if(p(f)){var g=a(f),Y={pageX:g.pageX,pageY:g.pageY},v=Y.pageX-n.pageX,b=Y.pageY-n.pageY;if($(f.target,v,b))return;l(v,b),n=Y;var z=new Date().getTime(),A=z-d;A>0&&(r.x=v/A,r.y=b/A,d=z),o(v,b)&&f.preventDefault()}}function S(){e.settings.swipeEasing&&(clearInterval(h),h=setInterval(function(){if(e.isInitialized){clearInterval(h);return}if(!r.x&&!r.y){clearInterval(h);return}if(Math.abs(r.x)<.01&&Math.abs(r.y)<.01){clearInterval(h);return}if(!e.element){clearInterval(h);return}l(r.x*30,r.y*30),r.x*=.8,r.y*=.8},10))}j.supportsTouch?(e.event.bind(t,"touchstart",m),e.event.bind(t,"touchmove",k),e.event.bind(t,"touchend",S)):j.supportsIePointer&&(window.PointerEvent?(e.event.bind(t,"pointerdown",m),e.event.bind(t,"pointermove",k),e.event.bind(t,"pointerup",S)):window.MSPointerEvent&&(e.event.bind(t,"MSPointerDown",m),e.event.bind(t,"MSPointerMove",k),e.event.bind(t,"MSPointerUp",S)))}var Ko=function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},qo={"click-rail":Io,"drag-thumb":Uo,keyboard:Vo,wheel:No,touch:Fo},U=function(t,o){var l=this;if(o===void 0&&(o={}),typeof t=="string"&&(t=document.querySelector(t)),!t||!t.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=t,t.classList.add(w.main),this.settings=Ko();for(var n in o)this.settings[n]=o[n];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var d=function(){return t.classList.add(w.state.focus)},r=function(){return t.classList.remove(w.state.focus)};this.isRtl=C(t).direction==="rtl",this.isRtl===!0&&t.classList.add(w.rtl),this.isNegativeScroll=function(){var p=t.scrollLeft,m=null;return t.scrollLeft=-1,m=t.scrollLeft<0,t.scrollLeft=p,m}(),this.negativeScrollAdjustment=this.isNegativeScroll?t.scrollWidth-t.clientWidth:0,this.event=new O,this.ownerDocument=t.ownerDocument||document,this.scrollbarXRail=V(w.element.rail("x")),t.appendChild(this.scrollbarXRail),this.scrollbarX=V(w.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",d),this.event.bind(this.scrollbarX,"blur",r),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var h=C(this.scrollbarXRail);this.scrollbarXBottom=parseInt(h.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=y(h.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=y(h.borderLeftWidth)+y(h.borderRightWidth),X(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=y(h.marginLeft)+y(h.marginRight),X(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=V(w.element.rail("y")),t.appendChild(this.scrollbarYRail),this.scrollbarY=V(w.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",d),this.event.bind(this.scrollbarY,"blur",r),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var a=C(this.scrollbarYRail);this.scrollbarYRight=parseInt(a.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=y(a.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?Bo(this.scrollbarY):null,this.railBorderYWidth=y(a.borderTopWidth)+y(a.borderBottomWidth),X(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=y(a.marginTop)+y(a.marginBottom),X(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:t.scrollLeft<=0?"start":t.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:t.scrollTop<=0?"start":t.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(p){return qo[p](l)}),this.lastScrollTop=Math.floor(t.scrollTop),this.lastScrollLeft=t.scrollLeft,this.event.bind(this.element,"scroll",function(p){return l.onScroll(p)}),H(this)};U.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,X(this.scrollbarXRail,{display:"block"}),X(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=y(C(this.scrollbarXRail).marginLeft)+y(C(this.scrollbarXRail).marginRight),this.railYMarginHeight=y(C(this.scrollbarYRail).marginTop)+y(C(this.scrollbarYRail).marginBottom),X(this.scrollbarXRail,{display:"none"}),X(this.scrollbarYRail,{display:"none"}),H(this),K(this,"top",0,!1,!0),K(this,"left",0,!1,!0),X(this.scrollbarXRail,{display:""}),X(this.scrollbarYRail,{display:""}))};U.prototype.onScroll=function(t){this.isAlive&&(H(this),K(this,"top",this.element.scrollTop-this.lastScrollTop),K(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)};U.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),B(this.scrollbarX),B(this.scrollbarY),B(this.scrollbarXRail),B(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)};U.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(t){return!t.match(/^ps([-_].+|)$/)}).join(" ")};const Jo=dt({__name:"PerfectScrollbar",props:{tag:{default:"div"},options:{default:()=>({})}},emits:["scroll","ps-scroll-y","ps-scroll-x","ps-scroll-up","ps-scroll-down","ps-scroll-left","ps-scroll-right","ps-y-reach-start","ps-y-reach-end","ps-x-reach-start","ps-x-reach-end"],setup(e,{expose:t,emit:o}){const l=e,n=o,d=J(null),r=J(null);ht(()=>l.options,()=>{a(),h()},{deep:!0}),ut(()=>{d.value&&h()}),pt(()=>{a()});function h(){d.value&&(r.value=new U(d.value,l.options),$())}function a(){r.value&&($(!1),r.value.destroy(),r.value=null)}const p={scroll:m("scroll"),"ps-scroll-y":m("ps-scroll-y"),"ps-scroll-x":m("ps-scroll-x"),"ps-scroll-up":m("ps-scroll-up"),"ps-scroll-down":m("ps-scroll-down"),"ps-scroll-left":m("ps-scroll-left"),"ps-scroll-right":m("ps-scroll-right"),"ps-y-reach-start":m("ps-y-reach-start"),"ps-y-reach-end":m("ps-y-reach-end"),"ps-x-reach-start":m("ps-x-reach-start"),"ps-x-reach-end":m("ps-x-reach-end")};function m(k){return function(S){n(k,S)}}function $(k=!0){var S;(S=r.value)!=null&&S.element&&Object.entries(p).forEach(([f,g])=>{var Y,v;k?(Y=r.value)==null||Y.element.addEventListener(f,g):(v=r.value)==null||v.element.removeEventListener(f,g)})}return t({ps:r}),(k,S)=>(i(),E(mt(k.tag),{ref_key:"scrollbar",ref:d,class:"ps"},{default:F(()=>[ft(k.$slots,"default")]),_:3},512))}}),Zo={class:"row"},Go={class:"col-12"},Qo={class:"row"},xo={class:"col-12"},tl=["onClick"],el=s("td",{rowspan:"2",class:"table-side-column"},"Высота",-1),sl=s("td",{rowspan:"2",class:"table-side-column"},"Ширина",-1),ol={key:0,colspan:"6",width:"200px",style:{"font-weight":"bold","text-align":"center",border:"1px solid #dadada"}},ll=s("td",{width:"100px",style:{"font-weight":"bold","text-align":"center",border:"1px solid #dadada","min-width":"100px"}},"Число петель",-1),il=s("td",{width:"100px",style:{"font-weight":"bold","text-align":"center",border:"1px solid #dadada","min-width":"100px"}},"Опт",-1),rl=s("td",{width:"100px",style:{"font-weight":"bold","text-align":"center",border:"1px solid #dadada","min-width":"100px"}},"Дилер",-1),nl=s("td",{width:"100px",style:{"font-weight":"bold","text-align":"center",border:"1px solid #dadada","min-width":"100px"}},"Розница",-1),al=s("td",{width:"100px",style:{"font-weight":"bold","text-align":"center",border:"1px solid #dadada","min-width":"100px"}},"Себестоимость",-1),cl=s("td",{width:"100px",style:{"font-weight":"bold","text-align":"center",border:"1px solid #dadada"}}," Коэффициент ",-1),dl={class:"table-side-column"},hl={class:"table-side-column"},ul={style:{"text-align":"center",border:"1px solid #dadada","min-width":"100px"}},pl={style:{"text-align":"center",border:"1px solid #dadada","min-width":"100px"}},fl={style:{"text-align":"center",border:"1px solid #dadada","min-width":"100px"}},ml={style:{"text-align":"center",border:"1px solid #dadada","min-width":"100px"}},bl={style:{"text-align":"center",border:"1px solid #dadada","min-width":"100px"}},vl={width:"100px",style:{"text-align":"center",border:"1px solid #dadada"}},gl={key:1,class:"alert alert-success my-3",role:"alert"},_l=s("h4",{class:"alert-heading"},"Выберите материалы",-1),yl=s("p",null,"Для отображения таблицы выберите интересующие материалы",-1),wl=[_l,yl],$l={key:2,class:"alert alert-success my-3",role:"alert"},kl=s("h4",{class:"alert-heading"},"Размеры",-1),Ml=s("p",null,"К сожалению, раздел размеров пуст. Вы еще не добавили ни одного размера, который можно отобразить на этой странице.",-1),Sl=s("hr",null,null,-1),Yl=s("p",{class:"mb-0"},"Воспользуйтесь формой выше и добавьте свой первый размер",-1),Ll=[kl,Ml,Sl,Yl],Tl={data(){return{materials:[],prices:[],selectedMaterials:[],table:null}},mounted(){this.loadSizes()},methods:{switchData(e){this.prices=this.table[e]},toggleMaterialId(e){let t=this.selectedMaterials.findIndex(o=>o===e);t===-1?this.selectedMaterials.push(e):this.selectedMaterials.splice(t,1)},loadSizes(e=0){this.$store.dispatch("loadPreparedPrices").then(t=>{this.table=t,this.materials=t.materials,this.prices=t.loops,this.selectedMaterials=this.materials.map(o=>o.id)}).catch(()=>{})},saveParam(e,t,o){this.$store.dispatch("updateSizeParam",{dataObject:{id:this.prices[t].prices[o].id,key:e,value:this.prices[t].prices[o][e],height:this.prices[t].prices[o].height||null,width:this.prices[t].prices[o].width||null,material_id:this.prices[t].prices[o].material_id||null}}).then(l=>{this.prices[t].prices[o].id||(this.prices[t].prices[o].id=l.data.id),this.$notify({title:"DoDoors",text:"Параметры успешно обновлены"})}).catch(()=>{})}}},Xl=Object.assign(Tl,{__name:"SizeTable2",setup(e){return(t,o)=>(i(),c(M,null,[s("div",Zo,[s("div",Go,[s("button",{onClick:o[0]||(o[0]=l=>t.switchData("sizes"))},"Размеры"),s("button",{onClick:o[1]||(o[1]=l=>t.switchData("loops"))},"Петли"),s("button",{onClick:o[2]||(o[2]=l=>t.switchData("colors"))},"Цвет"),s("button",{onClick:o[3]||(o[3]=l=>t.switchData("variants"))},"Толщина")])]),s("div",Qo,[s("div",xo,[(i(!0),c(M,null,P(t.materials,l=>(i(),c("span",{class:D(["badge mr-2 cursor-pointer",{"bg-primary":t.selectedMaterials.indexOf(l.id)!=-1,"bg-secondary":t.selectedMaterials.indexOf(l.id)==-1}]),onClick:n=>t.toggleMaterialId(l.id)},_(l.title),11,tl))),256))])]),t.prices.length>0&&t.selectedMaterials.length>0?(i(),E(et(Jo),{key:0,scrollTop:"",class:"py-2"},{default:F(()=>[s("table",null,[s("thead",null,[s("tr",null,[el,sl,(i(!0),c(M,null,P(t.materials,l=>(i(),c(M,null,[t.selectedMaterials.indexOf(l.id)!=-1?(i(),c("td",ol,_(l.title),1)):u("",!0)],64))),256))]),s("tr",null,[(i(!0),c(M,null,P(t.materials,l=>(i(),c(M,null,[t.selectedMaterials.indexOf(l.id)!=-1?(i(),c(M,{key:0},[ll,il,rl,nl,al,cl],64)):u("",!0)],64))),256))])]),s("tbody",null,[(i(!0),c(M,null,P(t.prices,(l,n)=>(i(),c("tr",null,[s("td",dl,[s("span",null,_(l.height),1)]),s("td",hl,[s("span",null,_(l.width),1)]),(i(!0),c(M,null,P(l.prices,(d,r)=>(i(),c(M,null,[t.selectedMaterials.indexOf(d.material_id)!=-1?(i(),c(M,{key:0},[s("td",ul,_(l.prices[r].value||0),1),s("td",pl,_(l.prices[r].price.wholesale),1),s("td",fl,_(l.prices[r].price.dealer),1),s("td",ml,_(l.prices[r].price.retail),1),s("td",bl,_(l.prices[r].price.cost),1),s("td",vl,_(l.prices[r].price_koef),1)],64)):u("",!0)],64))),256))]))),256))])])]),_:1})):u("",!0),t.selectedMaterials.length===0?(i(),c("div",gl,wl)):u("",!0),t.prices.length===0?(i(),c("div",$l,Ll)):u("",!0)],64))}}),Wl=s("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Размеры",-1),zl={class:"py-12"},Cl={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Hl={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Rl={class:"p-6 text-gray-900"},El=s("hr",{class:"hr my-5"},null,-1),Pl={data(){return{tab:0,loading:!1,selectedSize:null}},methods:{selectSize(e){this.selectedSize=e,this.loading=!0,this.$nextTick(()=>{this.loading=!1})},callbackSizeForm(){this.loading=!0,this.selectedSize=null,this.$nextTick(()=>{this.loading=!1})}}},Zl=Object.assign(Pl,{__name:"SizesPage",setup(e){return(t,o)=>(i(),c(M,null,[q(et(bt),{title:"Размеры"}),q(nt,null,{header:F(()=>[Wl]),default:F(()=>[s("div",zl,[s("div",Cl,[s("div",Hl,[s("div",Rl,[t.loading?u("",!0):(i(),E(st,{key:0,id:"size-form-1","need-controls":!0,item:t.selectedSize,onCallback:t.callbackSizeForm},null,8,["item","onCallback"])),El,t.tab===0?(i(),c(M,{key:1},[t.loading?u("",!0):(i(),E(Po,{key:0,onSelect:t.selectSize},null,8,["onSelect"]))],64)):u("",!0),t.tab===1?(i(),E(Xl,{key:2})):u("",!0)])])])])]),_:1})],64))}});export{Zl as default};
