import{_ as c}from"./AuthenticatedLayout-BI7PxwYW.js";import{_ as h}from"./ClientTable-DO3R0Dph.js";import{_}from"./ClientForm-CtjRHqLO.js";import{c as o,a as r,u as p,w as n,F as u,o as s,Z as f,b as e,f as y,e as i,d}from"./app-BDVVc-1O.js";import"./ApplicationLogo-BNpBoKZE.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./IndividualDataForm-5bgyjf9Z.js";import"./vue-the-mask-RmmmHBGa.js";import"./Pagination-yJUk7fk1.js";import"./UserTable-DfIkSi1L.js";import"./RoleTable-CD3dgyoM.js";import"./RalColorSelector-CChlaelM.js";import"./main-1oO4m4FC.js";import"./PermissionTable-07XObHv9.js";const g=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Клиенты",-1),k={class:"py-12"},b={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},C={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},x={class:"p-6 text-gray-900"},$={key:0,class:"fa-solid fa-file-import"},F={key:1,class:"spinner-border spinner-border-sm text-primary",role:"status"},v=e("span",{class:"visually-hidden"},"Loading...",-1),w=[v],D={key:0,class:"my-3 p-3 border-gray-100 border btn rounded-0 mx-2",href:"/moyscklad-client-log.txt",target:"_blank"},S=e("hr",{class:"hr my-5"},null,-1),B={data(){return{loading:!1,import_success:!1,moysklad_loading:!1,selectedClient:null}},methods:{importClientsFromMoySklad(){this.$notify({title:"DoDoors",text:"Началась загрузка данных"}),this.moysklad_loading=!0,this.import_success=!1,this.$store.dispatch("importClientsFromMoySklad").then(()=>{this.$notify({title:"DoDoors",text:"Данные успешно загружены",type:"success"}),this.import_success=!0,this.loading=!0,this.$nextTick(()=>{this.loading=!1,this.moysklad_loading=!1})}).catch(()=>{this.$notify({title:"DoDoors",text:"Ошибка загрузки данных",type:"error"}),this.moysklad_loading=!1})},selectClient(l){this.selectedClient=l,this.loading=!0,this.$nextTick(()=>{this.loading=!1})},callbackClientForm(){this.loading=!0,this.selectedClient=null,this.$nextTick(()=>{this.loading=!1})}}},H=Object.assign(B,{__name:"ClientsPage",setup(l){return(t,a)=>(s(),o(u,null,[r(p(f),{title:"Клиенты"}),r(c,null,{header:n(()=>[g]),default:n(()=>[e("div",k,[e("div",b,[e("div",C,[e("div",x,[e("button",{class:"my-3 p-3 border-gray-100 border btn rounded-0",type:"button",onClick:a[0]||(a[0]=(...m)=>t.importClientsFromMoySklad&&t.importClientsFromMoySklad(...m))},[t.moysklad_loading?(s(),o("div",F,w)):(s(),o("i",$)),y(" Загрузить данные из Мой Склад ")]),t.import_success?(s(),o("a",D,"Лог операции")):i("",!0),t.loading?i("",!0):(s(),d(_,{key:1,item:t.selectedClient,onCallback:t.callbackClientForm},null,8,["item","onCallback"])),S,t.loading?i("",!0):(s(),d(h,{key:2,onSelect:t.selectClient},null,8,["onSelect"]))])])])])]),_:1})],64))}});export{H as default};
