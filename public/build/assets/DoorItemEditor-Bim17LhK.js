import{o as d,c as a,b as o,p as k,e as p,n as O,F as w,t as u,r as $,l as ie,g as v,h as P,m as G,f as F,x as se,v as V,a as W,j as ee,i as R,d as A,w as B}from"./app-O5Q0GFN0.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{R as _e}from"./RalColorSelector--hcxjGF2.js";import{H as ue}from"./HandleDetail-CPNxDnt8.js";const fe={key:0,class:"row"},me={class:"col-12 mb-2"},ve={key:1,class:"row"},ge={class:"col-12 col-md-8"},ye={key:0,class:"upper-jumper d-flex justify-content-center align-items-center"},be=o("div",{class:"door-upper-jumper d-flex justify-content-center align-items-center"},[o("p",{class:"text-center",style:{"font-size":"12px"}},"1")],-1),we=[be],Fe={style:{position:"relative","z-index":"5"}},ke={class:"door-header"},$e={class:"door"},Ce=["src"],Ve={class:"height"},De={class:"width"},Se={class:"door-but"},Ie={class:"height"},ze={class:"depth"},Ue={class:"door-backstage"},Me={key:0,class:"skirting-board",style:{"font-size":"12px"}},He=o("p",null,"3",-1),je=[He],Ee=o("div",{class:"center"},null,-1),Le={key:1,class:"skirting-board",style:{"font-size":"12px"}},Re=o("p",null,"3",-1),Te=[Re],Pe={class:"door-footer"},qe={key:0,class:"doorstep d-flex justify-content-center align-items-center",style:{"font-size":"12px"}},Ae={class:"col-md-4 col-12"},Oe={class:"list-group list-group-numbered rounded-0 cursor-pointer"},Be=o("li",{class:"list-group-item bg-dark text-white"},"Петли",-1),Ne={props:["modelValue","disabled"],data(){return{side:0,door:null}},watch:{door:{handler(s){this.$emit("update:modelValue",this.door)},deep:!0}},mounted(){this.door=this.modelValue},computed:{sideColor(){return this.side===0?this.door.front_side_finish_color.code:this.door.back_side_finish_color.code},selectedSideFinishImageForDoor(){let s=this.side===0?"front_side_finish":"back_side_finish";if(!this.door[s].door_variants)return null;let e=this.door[s].door_variants.findIndex(t=>t.selected);return e===-1?null:this.door[s].door_variants[e].image},selectedSideFinishImageForWrapper(){let s=this.side===0?"front_side_finish":"back_side_finish";if(!this.door[s].wrapper_variants)return null;let e=this.door[s].wrapper_variants.findIndex(t=>t.selected);return e===-1?null:this.door[s].wrapper_variants[e].image}}},We=Object.assign(Ne,{__name:"DoorPreview",setup(s){return(e,t)=>{var i;return d(),a(w,null,[e.door?(d(),a("div",fe,[o("div",me,[o("button",{type:"button",class:k(["btn mr-2 rounded-0",{"btn-dark":e.side===0,"btn-outline-secondary":e.side!==0}]),onClick:t[0]||(t[0]=l=>e.side=0)}," Лицевая сторона ",2),o("button",{class:k(["btn rounded-0",{"btn-dark":e.side===1,"btn-outline-secondary":e.side!==1}]),type:"button",onClick:t[1]||(t[1]=l=>e.side=1)}," Внутренняя сторона ",2)])])):p("",!0),e.door?(d(),a("div",ve,[o("div",ge,[o("div",{class:"stage w-100",style:O({"background-image":"url("+e.selectedSideFinishImageForWrapper+")"})},[e.door.need_upper_jumper?(d(),a("div",ye,we)):p("",!0),o("div",Fe,[o("div",ke,[e.side===0?(d(),a(w,{key:0},[e.door.need_hidden_door_closer?(d(),a("div",{key:0,class:k(["door-closer d-flex justify-content-center align-items-center",{"to-right":e.door.loops.type==="left","to-left":e.door.loops.type==="right"}]),style:{"font-size":"12px"}}," 5 ",2)):p("",!0)],64)):(d(),a(w,{key:1},[e.door.need_hidden_door_closer?(d(),a("div",{key:0,class:k(["door-closer d-flex justify-content-center align-items-center",{"to-left":e.door.loops.type==="left","to-right":e.door.loops.type==="right"}]),style:{"font-size":"12px"}}," 5 ",2)):p("",!0)],64))]),o("div",$e,[o("img",{src:e.doorImage?e.doorImage:"/images/door-1.jpg",class:"w-100 h-100",style:{"object-fit":"cover"},alt:""},null,8,Ce),o("div",{class:"door-color",style:O({"background-color":e.sideColor||"transparent"})},null,4),o("div",Ve,[o("span",null,u(e.door.height),1)]),o("div",De,[o("span",null,u(e.door.width),1)]),e.side===0?(d(),a(w,{key:0},[e.door.handle_holes.id!==3&&e.door.need_handle_holes&&e.door.loops.type?(d(),a("div",{key:0,class:k(["handle",{"to-left":e.door.loops.type==="left","to-right":e.door.loops.type==="right"}]),style:O([{"background-size":"cover"},{"background-color":e.door.handle_holes_type.color||"transparent","background-image":e.door.loops.type==="right"?"url(../images/handle-left.png)":"url(../images/handle-right.png)"}])},"6 ",6)):p("",!0),e.door.loops.type?(d(),a("div",{key:1,class:k(["loops",{"to-left":e.door.loops.type==="left","to-right":e.door.loops.type==="right"}])},[(d(!0),a(w,null,$(e.door.loops_count,l=>(d(),a("span",null,"7"))),256))],2)):p("",!0)],64)):p("",!0),e.side===1?(d(),a(w,{key:1},[e.door.handle_holes.id!==3&&e.door.need_handle_holes&&e.door.loops.type?(d(),a("div",{key:0,class:k(["handle",{"to-right":e.door.loops.type==="left","to-left":e.door.loops.type==="right"}]),style:O([{"background-size":"cover"},{"background-color":e.door.handle_holes_type.color||"transparent","background-image":e.door.loops.type==="right"?"url(../images/handle-right.png)":"url(../images/handle-left.png)"}])},"6 ",6)):p("",!0),e.door.loops.type?(d(),a("div",{key:1,class:k(["loops",{"to-right":e.door.loops.type==="left","to-left":e.door.loops.type==="right"}])},[(d(!0),a(w,null,$(e.door.loops_count,l=>(d(),a("span",null,"7"))),256))],2)):p("",!0)],64)):p("",!0)]),o("div",Se,[o("div",Ie,[o("span",null,u(e.door.height),1)]),o("div",ze,[o("span",null,u(((i=e.door.opening_type)==null?void 0:i.depth)||0),1)])])]),o("div",Ue,[e.door.need_hidden_skirting_board?(d(),a("div",Me,je)):p("",!0),Ee,e.door.need_hidden_skirting_board?(d(),a("div",Le,Te)):p("",!0)]),o("div",Pe,[e.door.need_automatic_doorstep?(d(),a("div",qe," 2 ")):p("",!0),e.side===0?(d(),a(w,{key:1},[e.door.need_hidden_stopper?(d(),a("div",{key:0,class:k(["stopper d-flex justify-content-center align-items-center",{"to-left":e.door.loops.type==="left","to-right":e.door.loops.type==="right"}]),style:{"font-size":"12px"}}," 4 ",2)):p("",!0)],64)):(d(),a(w,{key:2},[e.door.need_hidden_stopper?(d(),a("div",{key:0,class:k(["stopper d-flex justify-content-center align-items-center",{"to-right":e.door.loops.type==="left","to-left":e.door.loops.type==="right"}]),style:{"font-size":"12px"}}," 4 ",2)):p("",!0)],64))])],4)]),o("div",Ae,[o("ul",Oe,[o("li",{onClick:t[2]||(t[2]=l=>s.disabled?null:e.door.need_upper_jumper=!e.door.need_upper_jumper),class:k([{"bg-dark text-white":e.door.need_upper_jumper},"list-group-item"])},"Верхняя перемычка ",2),o("li",{onClick:t[3]||(t[3]=l=>s.disabled?null:e.door.need_automatic_doorstep=!e.door.need_automatic_doorstep),class:k([{"bg-dark text-white":e.door.need_automatic_doorstep},"list-group-item"])},"Скрытый порог ",2),o("li",{onClick:t[4]||(t[4]=l=>s.disabled?null:e.door.need_hidden_skirting_board=!e.door.need_hidden_skirting_board),class:k([{"bg-dark text-white":e.door.need_hidden_skirting_board},"list-group-item"])},"Скрытый плинтус ",2),o("li",{onClick:t[5]||(t[5]=l=>s.disabled?null:e.door.need_hidden_stopper=!e.door.need_hidden_stopper),class:k([{"bg-dark text-white":e.door.need_hidden_stopper},"list-group-item"])},"Скрытый стопор ",2),o("li",{onClick:t[6]||(t[6]=l=>s.disabled?null:e.door.need_hidden_door_closer=!e.door.need_hidden_door_closer),class:k([{"bg-dark text-white":e.door.need_hidden_door_closer},"list-group-item"])},"Скрытый доводчик ",2),o("li",{onClick:t[7]||(t[7]=l=>s.disabled?null:e.door.need_handle_holes=!e.door.need_handle_holes),class:k([{"bg-dark text-white":e.door.need_handle_holes&&e.door.loops.type},"list-group-item"])},"Дверная ручка ",2),Be])])])):p("",!0)],64)}}}),Qe={props:["item"],data(){return{need_select_door_variant:!0,need_select_wrapper_variant:!0}},watch:{need_select_door_variant:{handler(s){this.need_select_door_variant||(this.item.door_variants.forEach(e=>{e.selected&&delete e.selected}),this.$emit("update:item",this.item))},deep:!0},need_select_wrapper_variant:{handler(s){this.need_select_wrapper_variant||(this.item.wrapper_variants.forEach(e=>{e.selected&&delete e.selected}),this.$emit("update:item",this.item))},deep:!0}},methods:{selectSideFinish(s,e){this.item[s][e].selected||!1||this.item[s].forEach(i=>{i.selected&&delete i.selected}),this.item[s][e].selected=!this.item[s][e].selected,this.$emit("update:item",this.item)}}},Ge={class:"font-bold my-2"},Je={class:"row"},Ke={class:"col-12"},Xe={class:"form-check form-switch"},Ye=o("label",{class:"form-check-label",for:"need_select_door_variant"}," Нужно подобрать текстуру дверей ",-1),Ze={key:0,class:"row mb-2"},xe=o("div",{class:"col-12"},[o("h6",{class:"font-700 font-bold my-3"},"Перечень вариантов дверей")],-1),eo={class:"col-lg-4 col-md-4 col-12 mb-2"},oo=["onClick"],to={class:"card-img-top",alt:"..."},so={class:"card-body"},lo={key:0,class:"font-bold"},ro={key:1,class:"card-text"},io={class:"row"},no={class:"col-12"},ao={class:"form-check form-switch"},co=o("label",{class:"form-check-label",for:"need_select_door_variant"}," Нужно подобрать текстуру материала вокруг двери ",-1),ho={key:1,class:"row mb-2"},po=o("div",{class:"col-12"},[o("h6",{class:"font-700 font-bold my-3"},"Перечень вариантов текстуры материала вокруг дверей")],-1),_o={class:"col-lg-4 col-md-4 col-12 mb-2"},uo=["onClick"],fo={class:"card-img-top",alt:"..."},mo={class:"card-body"},vo={key:0,class:"font-bold"},go={key:1,class:"card-text"};function yo(s,e,t,i,l,n){const c=ie("lazy");return d(),a(w,null,[o("h3",Ge,'Выбранный материал "'+u(t.item.title||"не указан")+'"',1),o("div",Je,[o("div",Ke,[o("div",Xe,[v(o("input",{class:"form-check-input","onUpdate:modelValue":e[0]||(e[0]=h=>l.need_select_door_variant=h),type:"checkbox",role:"switch",id:"need_select_door_variant",checked:""},null,512),[[P,l.need_select_door_variant]]),Ye])])]),t.item.door_variants&&l.need_select_door_variant?(d(),a("div",Ze,[xe,(d(!0),a(w,null,$(t.item.door_variants,(h,f)=>(d(),a("div",eo,[o("div",{class:k(["card cursor-pointer",{"border-secondary shadow-lg":h.selected}]),onClick:m=>n.selectSideFinish("door_variants",f)},[v(o("img",to,null,512),[[c,h.image]]),o("div",so,[h.title?(d(),a("h6",lo,u(h.title||"не указано"),1)):p("",!0),h.description?(d(),a("p",ro,u(h.description||"не указано"),1)):p("",!0)])],10,oo)]))),256))])):p("",!0),o("div",io,[o("div",no,[o("div",ao,[v(o("input",{class:"form-check-input","onUpdate:modelValue":e[1]||(e[1]=h=>l.need_select_wrapper_variant=h),type:"checkbox",role:"switch",id:"need_select_door_variant",checked:""},null,512),[[P,l.need_select_wrapper_variant]]),co])])]),t.item.wrapper_variants&&l.need_select_wrapper_variant?(d(),a("div",ho,[po,(d(!0),a(w,null,$(t.item.wrapper_variants,(h,f)=>(d(),a("div",_o,[o("div",{class:k(["card cursor-pointer",{"border-secondary shadow-lg":h.selected}]),onClick:m=>n.selectSideFinish("wrapper_variants",f)},[v(o("img",fo,null,512),[[c,h.image]]),o("div",mo,[h.title?(d(),a("h6",vo,u(h.title||"не указано"),1)):p("",!0),h.description?(d(),a("p",go,u(h.description||"не указано"),1)):p("",!0)])],10,uo)]))),256))])):p("",!0)],64)}const le=oe(Qe,[["render",yo]]);var Q,bo=new Uint8Array(16);function de(){if(!Q&&(Q=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Q))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Q(bo)}const wo=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ne(s){return typeof s=="string"&&wo.test(s)}var U=[];for(var K=0;K<256;++K)U.push((K+256).toString(16).substr(1));function te(s){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(U[s[e+0]]+U[s[e+1]]+U[s[e+2]]+U[s[e+3]]+"-"+U[s[e+4]]+U[s[e+5]]+"-"+U[s[e+6]]+U[s[e+7]]+"-"+U[s[e+8]]+U[s[e+9]]+"-"+U[s[e+10]]+U[s[e+11]]+U[s[e+12]]+U[s[e+13]]+U[s[e+14]]+U[s[e+15]]).toLowerCase();if(!ne(t))throw TypeError("Stringified UUID is invalid");return t}var re,X,Y=0,Z=0;function Fo(s,e,t){var i=e&&t||0,l=e||new Array(16);s=s||{};var n=s.node||re,c=s.clockseq!==void 0?s.clockseq:X;if(n==null||c==null){var h=s.random||(s.rng||de)();n==null&&(n=re=[h[0]|1,h[1],h[2],h[3],h[4],h[5]]),c==null&&(c=X=(h[6]<<8|h[7])&16383)}var f=s.msecs!==void 0?s.msecs:Date.now(),m=s.nsecs!==void 0?s.nsecs:Z+1,C=f-Y+(m-Z)/1e4;if(C<0&&s.clockseq===void 0&&(c=c+1&16383),(C<0||f>Y)&&s.nsecs===void 0&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Y=f,Z=m,X=c,f+=122192928e5;var y=((f&268435455)*1e4+m)%4294967296;l[i++]=y>>>24&255,l[i++]=y>>>16&255,l[i++]=y>>>8&255,l[i++]=y&255;var _=f/4294967296*1e4&268435455;l[i++]=_>>>8&255,l[i++]=_&255,l[i++]=_>>>24&15|16,l[i++]=_>>>16&255,l[i++]=c>>>8|128,l[i++]=c&255;for(var b=0;b<6;++b)l[i+b]=n[b];return e||te(l)}function ko(s){if(!ne(s))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(s.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(s.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(s.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(s.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(s.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function $o(s){s=unescape(encodeURIComponent(s));for(var e=[],t=0;t<s.length;++t)e.push(s.charCodeAt(t));return e}var Co="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Vo="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function ae(s,e,t){function i(l,n,c,h){if(typeof l=="string"&&(l=$o(l)),typeof n=="string"&&(n=ko(n)),n.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var f=new Uint8Array(16+l.length);if(f.set(n),f.set(l,n.length),f=t(f),f[6]=f[6]&15|e,f[8]=f[8]&63|128,c){h=h||0;for(var m=0;m<16;++m)c[h+m]=f[m];return c}return te(f)}try{i.name=s}catch{}return i.DNS=Co,i.URL=Vo,i}function Do(s){if(typeof s=="string"){var e=unescape(encodeURIComponent(s));s=new Uint8Array(e.length);for(var t=0;t<e.length;++t)s[t]=e.charCodeAt(t)}return So(Io(zo(s),s.length*8))}function So(s){for(var e=[],t=s.length*32,i="0123456789abcdef",l=0;l<t;l+=8){var n=s[l>>5]>>>l%32&255,c=parseInt(i.charAt(n>>>4&15)+i.charAt(n&15),16);e.push(c)}return e}function ce(s){return(s+64>>>9<<4)+14+1}function Io(s,e){s[e>>5]|=128<<e%32,s[ce(e)-1]=e;for(var t=1732584193,i=-271733879,l=-1732584194,n=271733878,c=0;c<s.length;c+=16){var h=t,f=i,m=l,C=n;t=M(t,i,l,n,s[c],7,-680876936),n=M(n,t,i,l,s[c+1],12,-389564586),l=M(l,n,t,i,s[c+2],17,606105819),i=M(i,l,n,t,s[c+3],22,-1044525330),t=M(t,i,l,n,s[c+4],7,-176418897),n=M(n,t,i,l,s[c+5],12,1200080426),l=M(l,n,t,i,s[c+6],17,-1473231341),i=M(i,l,n,t,s[c+7],22,-45705983),t=M(t,i,l,n,s[c+8],7,1770035416),n=M(n,t,i,l,s[c+9],12,-1958414417),l=M(l,n,t,i,s[c+10],17,-42063),i=M(i,l,n,t,s[c+11],22,-1990404162),t=M(t,i,l,n,s[c+12],7,1804603682),n=M(n,t,i,l,s[c+13],12,-40341101),l=M(l,n,t,i,s[c+14],17,-1502002290),i=M(i,l,n,t,s[c+15],22,1236535329),t=H(t,i,l,n,s[c+1],5,-165796510),n=H(n,t,i,l,s[c+6],9,-1069501632),l=H(l,n,t,i,s[c+11],14,643717713),i=H(i,l,n,t,s[c],20,-373897302),t=H(t,i,l,n,s[c+5],5,-701558691),n=H(n,t,i,l,s[c+10],9,38016083),l=H(l,n,t,i,s[c+15],14,-660478335),i=H(i,l,n,t,s[c+4],20,-405537848),t=H(t,i,l,n,s[c+9],5,568446438),n=H(n,t,i,l,s[c+14],9,-1019803690),l=H(l,n,t,i,s[c+3],14,-187363961),i=H(i,l,n,t,s[c+8],20,1163531501),t=H(t,i,l,n,s[c+13],5,-1444681467),n=H(n,t,i,l,s[c+2],9,-51403784),l=H(l,n,t,i,s[c+7],14,1735328473),i=H(i,l,n,t,s[c+12],20,-1926607734),t=j(t,i,l,n,s[c+5],4,-378558),n=j(n,t,i,l,s[c+8],11,-2022574463),l=j(l,n,t,i,s[c+11],16,1839030562),i=j(i,l,n,t,s[c+14],23,-35309556),t=j(t,i,l,n,s[c+1],4,-1530992060),n=j(n,t,i,l,s[c+4],11,1272893353),l=j(l,n,t,i,s[c+7],16,-155497632),i=j(i,l,n,t,s[c+10],23,-1094730640),t=j(t,i,l,n,s[c+13],4,681279174),n=j(n,t,i,l,s[c],11,-358537222),l=j(l,n,t,i,s[c+3],16,-722521979),i=j(i,l,n,t,s[c+6],23,76029189),t=j(t,i,l,n,s[c+9],4,-640364487),n=j(n,t,i,l,s[c+12],11,-421815835),l=j(l,n,t,i,s[c+15],16,530742520),i=j(i,l,n,t,s[c+2],23,-995338651),t=E(t,i,l,n,s[c],6,-198630844),n=E(n,t,i,l,s[c+7],10,1126891415),l=E(l,n,t,i,s[c+14],15,-1416354905),i=E(i,l,n,t,s[c+5],21,-57434055),t=E(t,i,l,n,s[c+12],6,1700485571),n=E(n,t,i,l,s[c+3],10,-1894986606),l=E(l,n,t,i,s[c+10],15,-1051523),i=E(i,l,n,t,s[c+1],21,-2054922799),t=E(t,i,l,n,s[c+8],6,1873313359),n=E(n,t,i,l,s[c+15],10,-30611744),l=E(l,n,t,i,s[c+6],15,-1560198380),i=E(i,l,n,t,s[c+13],21,1309151649),t=E(t,i,l,n,s[c+4],6,-145523070),n=E(n,t,i,l,s[c+11],10,-1120210379),l=E(l,n,t,i,s[c+2],15,718787259),i=E(i,l,n,t,s[c+9],21,-343485551),t=q(t,h),i=q(i,f),l=q(l,m),n=q(n,C)}return[t,i,l,n]}function zo(s){if(s.length===0)return[];for(var e=s.length*8,t=new Uint32Array(ce(e)),i=0;i<e;i+=8)t[i>>5]|=(s[i/8]&255)<<i%32;return t}function q(s,e){var t=(s&65535)+(e&65535),i=(s>>16)+(e>>16)+(t>>16);return i<<16|t&65535}function Uo(s,e){return s<<e|s>>>32-e}function J(s,e,t,i,l,n){return q(Uo(q(q(e,s),q(i,n)),l),t)}function M(s,e,t,i,l,n,c){return J(e&t|~e&i,s,e,l,n,c)}function H(s,e,t,i,l,n,c){return J(e&i|t&~i,s,e,l,n,c)}function j(s,e,t,i,l,n,c){return J(e^t^i,s,e,l,n,c)}function E(s,e,t,i,l,n,c){return J(t^(e|~i),s,e,l,n,c)}var Mo=ae("v3",48,Do);const Ho=Mo;function jo(s,e,t){s=s||{};var i=s.random||(s.rng||de)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){t=t||0;for(var l=0;l<16;++l)e[t+l]=i[l];return e}return te(i)}function Eo(s,e,t,i){switch(s){case 0:return e&t^~e&i;case 1:return e^t^i;case 2:return e&t^e&i^t&i;case 3:return e^t^i}}function x(s,e){return s<<e|s>>>32-e}function Lo(s){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof s=="string"){var i=unescape(encodeURIComponent(s));s=[];for(var l=0;l<i.length;++l)s.push(i.charCodeAt(l))}else Array.isArray(s)||(s=Array.prototype.slice.call(s));s.push(128);for(var n=s.length/4+2,c=Math.ceil(n/16),h=new Array(c),f=0;f<c;++f){for(var m=new Uint32Array(16),C=0;C<16;++C)m[C]=s[f*64+C*4]<<24|s[f*64+C*4+1]<<16|s[f*64+C*4+2]<<8|s[f*64+C*4+3];h[f]=m}h[c-1][14]=(s.length-1)*8/Math.pow(2,32),h[c-1][14]=Math.floor(h[c-1][14]),h[c-1][15]=(s.length-1)*8&4294967295;for(var y=0;y<c;++y){for(var _=new Uint32Array(80),b=0;b<16;++b)_[b]=h[y][b];for(var D=16;D<80;++D)_[D]=x(_[D-3]^_[D-8]^_[D-14]^_[D-16],1);for(var I=t[0],r=t[1],g=t[2],z=t[3],S=t[4],L=0;L<80;++L){var T=Math.floor(L/20),pe=x(I,5)+Eo(T,r,g,z)+S+e[T]+_[L]>>>0;S=z,z=g,g=x(r,30)>>>0,r=I,I=pe}t[0]=t[0]+I>>>0,t[1]=t[1]+r>>>0,t[2]=t[2]+g>>>0,t[3]=t[3]+z>>>0,t[4]=t[4]+S>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var Ro=ae("v5",80,Lo);const To=Ro;var he={v1:Fo,v3:Ho,v4:jo,v5:To};const Po={key:0,class:"mb-2"},qo={key:0,class:"dropdown-center"},Ao=o("i",{class:"fa-solid fa-palette"},null,-1),Oo={key:0,class:"mb-0"},Bo={class:"dropdown-menu rounded-0"},No=o("li",null,[o("hr",{class:"dropdown-divider"})],-1),Wo=["onClick"],Qo=o("li",null,[o("hr",{class:"dropdown-divider"})],-1),Go={key:1,class:"input-group mb-0"},Jo={class:"form-floating"},Ko={for:"select-color-input"},Xo=o("i",{class:"fa-solid fa-palette"},null,-1),Yo={key:1,class:"btn btn-outline-secondary",type:"button","data-bs-auto-close":"true","data-bs-toggle":"dropdown","aria-expanded":"false"},Zo=o("i",{class:"fa-solid fa-up-right-and-down-left-from-center"},null,-1),xo=[Zo],et={class:"dropdown-menu dropdown-menu-end rounded-0"},ot=o("li",null,[o("hr",{class:"dropdown-divider"})],-1),tt=o("li",null,[o("hr",{class:"dropdown-divider"})],-1),st=["onClick"],lt=["id"],rt={class:"modal-dialog"},it={class:"modal-content rounded-0"},dt=o("div",{class:"modal-header"},[o("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Выбор цвета RAL"),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),nt={class:"modal-body"},at={props:["modelValue","filter","material"],data(){return{id:null,color:null,colorModal:null,colors:[]}},watch:{getRalColors:{handler(s){this.colors=this.getRalColors},deep:!0},color:{handler(s){let e=(this.color.title||"").toLowerCase();e.indexOf("ral")!==-1&&(e=e.substring(e.indexOf("ral")+3).trim()),e.length===4&&Object.keys(this.colors).forEach(t=>{this.colors[t].code===e&&(this.color.code=this.colors[t].color.hex,this.color.title=this.colors[t].names.en,this.color.ral_color="RAL "+this.colors[t].code)})},deep:!0}},computed:{...G(["getDictionary","getRalColors"]),filteredColors(){return this.getDictionary.color_variants.filter(e=>e.type===this.filter||e.type==="all")}},mounted(){this.id=he.v4(),this.color=this.modelValue},methods:{invertHex(s){if(!s)return"#000000";var e=s.replace(/#/,""),t=parseInt(e.substr(0,2),16),i=parseInt(e.substr(2,2),16),l=parseInt(e.substr(4,2),16),n=(.2126*t+.7152*i+.0722*l)/255;return n>.5?"#000000":"#ffffff"},isHex(s){return/^#[0-9A-F]{6}$/i.test(s)},alert(s){this.$emit("invalid",s)},callbackSelectColor(s){this.color.title=s.code?"RAL "+s.code:s.names.en,this.color.code=s.color.hex,this.color.ral_code="RAL "+s.code,this.colorModal.hide()},loadRalColors(){this.$store.dispatch("loadRalColors")},openRalModal(){this.loadRalColors(),this.colorModal=new bootstrap.Modal(document.getElementById("select-ral-color-"+this.id),{}),this.colorModal.show()},selectColor(s){let e=null;s!=null&&(e={title:s.title||s.code,code:s.code||null,sizes:s.sizes,is_ral:!1,excludes:s.excludes||[],type:s.type||"all",assign_with_size:s.assign_with_size||!1},s.title.toLowerCase()==="ral"&&(this.loadRalColors(),e={title:"RAL",code:"RAL",is_ral:!0,sizes:s.sizes,excludes:s.excludes||[],type:s.type||"all",assign_with_size:s.assign_with_size||!1})),this.color=e||{title:null},document.querySelectorAll(".dropdown-menu").forEach(i=>{i.classList.remove("show")}),this.$emit("change",this.color),this.$emit("update:modelValue",this.color)}}},N=Object.assign(at,{__name:"ColorSelector",setup(s){return(e,t)=>{var i,l,n,c,h,f;return d(),a(w,null,[e.color?(d(),a("div",Po,[(l=(i=s.material)==null?void 0:i.config)!=null&&l.is_custom_color?p("",!0):(d(),a(w,{key:0},[(e.color.code||null)!=="RAL"?(d(),a("div",qo,[o("button",{style:O({"background-color":e.color.code,color:e.invertHex(e.color.code)}),class:"btn btn-outline-secondary w-100 rounded-0 custom-dropdown-btn text-left",type:"button","data-bs-toggle":"dropdown","data-bs-auto-close":"true","aria-expanded":"false"},[o("span",{class:k([{"font-size-10":e.color.title},"mr-2"])},[Ao,F(),se(e.$slots,"name")],2),e.color.title?(d(),a("p",Oo,u(e.color.title),1)):p("",!0)],4),o("ul",Bo,[o("li",null,[o("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[0]||(t[0]=m=>e.selectColor(null))},"Не выбрано")]),No,(d(!0),a(w,null,$(e.filteredColors,m=>(d(),a("li",null,[o("a",{class:k(["dropdown-item",{"bg-primary text-white":e.color.title===m.title}]),onClick:C=>e.selectColor(m),href:"javascript:void(0)"},u(m.title),11,Wo)]))),256)),Qo,o("li",null,[o("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[1]||(t[1]=(...m)=>e.openRalModal&&e.openRalModal(...m))},"Справочник цветов")])])])):p("",!0)],64)),(e.color.code||"").toLowerCase()==="ral"||(c=(n=s.material)==null?void 0:n.config)!=null&&c.is_custom_color?(d(),a("div",Go,[e.isHex(e.color.title)?(d(),a("span",{key:0,class:"input-group-text border-secondary",style:O([{"background-color":e.color.title},{width:"40px","border-radius":"0px"}]),id:"basic-addon1"},null,4)):p("",!0),o("div",Jo,[v(o("input",{type:"text",onInvalid:t[2]||(t[2]=m=>e.alert("Вы не выбрали цвет")),"onUpdate:modelValue":t[3]||(t[3]=m=>e.color.title=m),class:"form-control",id:"select-color-input",required:""},null,544),[[V,e.color.title]]),o("label",Ko,[Xo,se(e.$slots,"name")])]),(f=(h=s.material)==null?void 0:h.config)!=null&&f.is_custom_color?p("",!0):(d(),a("button",Yo,xo)),o("ul",et,[o("li",null,[o("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[4]||(t[4]=m=>e.color={title:null})},"Не выбрано")]),ot,o("li",null,[o("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[5]||(t[5]=(...m)=>e.openRalModal&&e.openRalModal(...m))},"Выбор цвета RAL")]),tt,o("li",null,[(d(!0),a(w,null,$(e.filteredColors,m=>(d(),a("a",{class:k(["dropdown-item",{"bg-primary text-white":e.color.title===m.title}]),onClick:C=>e.selectColor(m),href:"javascript:void(0)"},u(m.title),11,st))),256))])])])):p("",!0)])):p("",!0),o("div",{class:"modal fade",id:"select-ral-color-"+e.id,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[o("div",rt,[o("div",it,[dt,o("div",nt,[W(_e,{onSelect:e.callbackSelectColor},null,8,["onSelect"])])])])],8,lt)],64)}}}),ct={props:["modelValue"],data(){return{door:null,edit_loading:!1,edited_handle:null,success_added:[],filter_modal:null,new_handles:[],searchQuery:""}},watch:{door:{handler(s){this.$emit("update:modelValue",this.door)},deep:!0}},computed:{...G(["getDictionary","cartTotalCount"]),filteredItems(){return this.getDictionary.handle_holes_type_variants.filter(s=>s.title?s.title.toLowerCase().includes(this.searchQuery.toLowerCase()):"").reverse()}},mounted(){this.filter_modal=new bootstrap.Modal(document.getElementById("handlers-filter-modal")),this.door=this.modelValue},methods:{reloadHandles(){this.$store.dispatch("updatedFormattedSizes").then(s=>{window.dispatchEvent(new CustomEvent("load-sizes",{detail:null})),this.$notify({title:"DoDoors",text:"Вы успешно обновили данные"})})},saveEditedHandle(){this.edited_handle&&(this.edit_loading=!0,this.$store.dispatch("fastEditHandle",{handle:this.edited_handle}).then(s=>{this.$notify({title:"DoDoors",text:"Вы сохранили данные по ручке"}),this.edit_loading=!1,this.edited_handle=null,this.reloadHandles()}).catch(s=>{this.edit_loading=!1,this.$notify({title:"DoDoors",text:"Ошибка сохранения ручки",type:"error"})}))},removeSelectedHandle(){this.edited_handle&&(this.edit_loading=!0,this.$store.dispatch("removeHandle",{handleId:this.edited_handle.id}).then(()=>{this.edit_loading=!1,this.reloadHandles()}).catch(()=>{this.edit_loading=!1}))},showFilterModal(){this.edited_handle=null,this.filter_modal.show()},selectHandle(s){let e=this.success_added.findIndex(t=>t===s.title);e!=-1&&this.success_added.splice(e,1),this.door.handle_holes_type=s.id==null?{title:null}:s,localStorage.setItem("dodoors_handle_holes_type_selected",JSON.stringify(this.door.handle_holes_type)),console.log("Save to ls",this.door.handle_holes_type),this.edited_handle=null,this.filter_modal.hide()},editHandle(s){var e;if(this.edited_handle&&((e=this.edited_handle)==null?void 0:e.id)===s.id){this.edited_handle=null;return}this.edited_handle=null,this.$nextTick(()=>{this.edited_handle=s})},saveHandles(){this.$store.dispatch("fastStoreHandles",{handles:this.new_handles}).then(s=>{this.$notify({title:"DoDoors",text:"Вы сохранили данные по ручкам"}),this.new_handles.forEach(e=>{this.success_added.push(e.title),this.$store.dispatch("pushHandles",{title:e.title,price:e.price})}),this.new_handles=[],this.$store.dispatch("updatedFormattedSizes").then(e=>{window.dispatchEvent(new CustomEvent("load-sizes",{detail:null})),this.$notify({title:"DoDoors",text:"Вы успешно обновили данные"})})}).catch(s=>{this.$notify({title:"DoDoors",text:"Ошибка сохранения ручек",type:"error"})})},removeHandle(s){this.new_handles.splice(s,1)},addNewHandle(){this.new_handles.push({title:"",price:0})},reset(){this.edited_handle=null,this.filter_modal.hide(),this.door.handle_holes_type={title:null},this.searchQuery=""}}},ht={class:"card-body px-2 py-1"},pt=o("label",{class:"font-size-10"},[o("i",{class:"fa-solid fa-ruler-vertical"}),F(" Выбор ручки")],-1),_t={key:0},ut={class:"modal fade",id:"handlers-filter-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ft={class:"modal-dialog modal-lg"},mt={class:"modal-content"},vt=o("div",{class:"modal-header"},[o("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Варианты ручек"),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),gt={key:0,class:"modal-body"},yt={class:"form-floating mb-3"},bt=o("label",{for:"searchInput"},"Поиск...",-1),wt={key:0,class:"fw-bold mb-2"},Ft={class:"small text-secondary"},kt={class:"form-floating"},$t=["id","onUpdate:modelValue"],Ct=["for"],Vt={class:"form-floating"},Dt=["id","onUpdate:modelValue"],St=["for"],It=["onClick"],zt={class:"d-flex flex-start"},Ut=o("i",{class:"fa-solid fa-floppy-disk"},null,-1),Mt=["disabled"],Ht=o("i",{class:"fa-solid fa-plus"},null,-1),jt={class:"list-group"},Et=["onClick"],Lt={key:0,class:"fa-solid fa-pen-to-square text-success"},Rt={key:1,class:"fa-solid fa-xmark text-danger"},Tt=["onClick"],Pt={class:"form-floating mb-2"},qt=["id"],At=["for"],Ot={class:"input-group mb-2"},Bt={class:"form-floating"},Nt=["id"],Wt=["for"],Qt={class:"form-floating"},Gt=["id"],Jt=["for"],Kt={class:"form-floating"},Xt=["id"],Yt=["for"],Zt={class:"form-floating"},xt=["id"],es=["for"],os={class:"d-flex justify-content-between"},ts=["disabled"],ss={key:0,class:"fa-solid fa-floppy-disk mr-2"},ls={key:1,id:"preloader",class:"d-inline-flex justify-content-center align-items-center mr-2"},rs=o("div",{class:"spinner-border spinner-border-sm text-white",role:"status"},[o("span",{class:"visually-hidden"},"Загрузка...")],-1),is=[rs],ds=["disabled"],ns={key:0,class:"fa-solid fa-trash-can mr-2"},as={key:1,id:"preloader",class:"d-inline-flex justify-content-center align-items-center mr-2"},cs=o("div",{class:"spinner-border spinner-border-sm text-white",role:"status"},[o("span",{class:"visually-hidden"},"Загрузка...")],-1),hs=[cs];function ps(s,e,t,i,l,n){var c;return d(),a(w,null,[o("div",{onClick:e[0]||(e[0]=(...h)=>n.showFilterModal&&n.showFilterModal(...h)),class:"card rounded-0 border-black cursor-pointer"},[o("div",ht,[pt,l.door?(d(),a("p",_t,u(((c=l.door.handle_holes_type)==null?void 0:c.title)||"не выбрано"),1)):p("",!0)])]),o("div",ut,[o("div",ft,[o("div",mt,[vt,l.door?(d(),a("div",gt,[o("button",{type:"button",class:"btn btn-outline-secondary w-100 rounded-0 p-3 mb-2",onClick:e[1]||(e[1]=(...h)=>n.reset&&n.reset(...h))},"Не выбрано "),o("div",yt,[v(o("input",{type:"search",class:"form-control",id:"searchInput",placeholder:"Поиск...","onUpdate:modelValue":e[2]||(e[2]=h=>l.searchQuery=h)},null,512),[[V,l.searchQuery]]),bt]),l.new_handles.length>0?(d(),a("h6",wt,[F("Добавленные ручки "),o("span",Ft,u(l.new_handles.length)+"/10",1)])):p("",!0),(d(!0),a(w,null,$(l.new_handles,(h,f)=>(d(),a("div",{key:"handle"+f,class:"input-group mb-2"},[o("div",kt,[v(o("input",{type:"text",class:"form-control",id:"fast-new-handle-title-"+f,"onUpdate:modelValue":m=>l.new_handles[f].title=m},null,8,$t),[[V,l.new_handles[f].title]]),o("label",{for:"fast-new-handle-title-"+f},"Название",8,Ct)]),o("div",Vt,[v(o("input",{type:"number",class:"form-control",id:"fast-new-handle-price-"+f,"onUpdate:modelValue":m=>l.new_handles[f].price=m},null,8,Dt),[[V,l.new_handles[f].price]]),o("label",{for:"fast-new-handle-price-"+f},"Цена, руб",8,St)]),o("button",{onClick:m=>n.removeHandle(f),class:"btn btn-dark rounded-0",type:"button"},"Удалить ",8,It)]))),128)),o("div",zt,[l.new_handles.length>0?(d(),a("button",{key:0,type:"button",onClick:e[3]||(e[3]=(...h)=>n.saveHandles&&n.saveHandles(...h)),class:"btn btn-dark rounded-0 mb-3 mr-2"},[Ut,F(" Сохранить ")])):p("",!0),o("button",{type:"button",disabled:l.new_handles.length>=10,onClick:e[4]||(e[4]=(...h)=>n.addNewHandle&&n.addNewHandle(...h)),class:k([{"btn-outline-dark":l.new_handles.length>0,"btn-dark":l.new_handles.length===0},"btn rounded-0 mb-3"])},[Ht,F(" Добавить новую ручку ")],10,Mt)]),o("div",jt,[(d(!0),a(w,null,$(n.filteredItems,(h,f)=>{var m,C;return d(),a("div",{key:h.title,class:k(["list-group-item cursor-pointer",{"list-group-item-primary":l.door.handle_holes_type===h,"list-group-item-success":l.success_added.indexOf(h.title)!=-1&&h.id!=null,"list-group-item-warning":l.success_added.indexOf(h.title)!=-1&&h.id==null}])},[o("a",{href:"javascript:void(0)",onClick:y=>n.editHandle(h),class:"mr-2"},[((m=l.edited_handle)==null?void 0:m.id)!==h.id?(d(),a("i",Lt)):(d(),a("i",Rt))],8,Et),o("span",{onClick:y=>n.selectHandle(h)},u(h.title),9,Tt),((C=l.edited_handle)==null?void 0:C.id)===h.id?(d(),a("form",{key:0,onSubmit:e[11]||(e[11]=ee((...y)=>n.saveEditedHandle&&n.saveEditedHandle(...y),["prevent"]))},[o("div",Pt,[v(o("input",{type:"text",class:"form-control",id:"edit-fast-new-handle-title-"+h.id,"onUpdate:modelValue":e[5]||(e[5]=y=>l.edited_handle.title=y),required:""},null,8,qt),[[V,l.edited_handle.title]]),o("label",{for:"edit-fast-new-handle-title-"+h.id},"Название",8,At)]),o("div",Ot,[o("div",Bt,[v(o("input",{type:"number",class:"form-control",id:"edit-fast-new-handle-price-wholesale-"+h.id,"onUpdate:modelValue":e[6]||(e[6]=y=>l.edited_handle.price.wholesale=y),required:""},null,8,Nt),[[V,l.edited_handle.price.wholesale]]),o("label",{for:"edit-fast-new-handle-price-wholesale-"+h.id},"Оптовая цена, руб",8,Wt)]),o("div",Qt,[v(o("input",{type:"number",class:"form-control",id:"edit-fast-new-handle-price-dealer-"+h.id,"onUpdate:modelValue":e[7]||(e[7]=y=>l.edited_handle.price.dealer=y),required:""},null,8,Gt),[[V,l.edited_handle.price.dealer]]),o("label",{for:"edit-fast-new-handle-price-dealer-"+h.id},"Цена дилера, руб",8,Jt)]),o("div",Kt,[v(o("input",{type:"number",class:"form-control",id:"edit-fast-new-handle-price-retail-"+h.id,"onUpdate:modelValue":e[8]||(e[8]=y=>l.edited_handle.price.retail=y),required:""},null,8,Xt),[[V,l.edited_handle.price.retail]]),o("label",{for:"edit-fast-new-handle-price-retail-"+h.id},"Розничная цена, руб",8,Yt)]),o("div",Zt,[v(o("input",{type:"number",class:"form-control",id:"edit-fast-new-handle-price-cost-"+h.id,"onUpdate:modelValue":e[9]||(e[9]=y=>l.edited_handle.price.cost=y),required:""},null,8,xt),[[V,l.edited_handle.price.cost]]),o("label",{for:"edit-fast-new-handle-price-cost-"+h.id},"Себестоимость, руб",8,es)])]),o("div",os,[o("button",{disabled:l.edit_loading,class:"btn btn-dark rounded-0",type:"submit"},[l.edit_loading?p("",!0):(d(),a("i",ss)),l.edit_loading?(d(),a("div",ls,is)):p("",!0),F(" Сохранить ")],8,ts),o("button",{disabled:l.edit_loading,onClick:e[10]||(e[10]=(...y)=>n.removeSelectedHandle&&n.removeSelectedHandle(...y)),class:"btn bg-danger text-white rounded-0",type:"button"},[l.edit_loading?p("",!0):(d(),a("i",ns)),l.edit_loading?(d(),a("div",as,hs)):p("",!0),F(" Удалить ручку ")],8,ds)])],32)):p("",!0)],2)}),128))])])):p("",!0)])])])],64)}const _s=oe(ct,[["render",ps]]),us={props:["modelValue"],data(){return{door:null,edit_loading:!1,edited_wrapper:null,success_added:[],filter_modal:null,new_wrappers:[],searchQuery:"",new_handles:[]}},watch:{door:{handler(s){this.$emit("update:modelValue",this.door)},deep:!0}},computed:{...G(["getDictionary","cartTotalCount"]),filteredItems(){return this.getDictionary.handle_holes_type_variants.filter(s=>s.title?s.title.toLowerCase().includes(this.searchQuery.toLowerCase()):"").reverse()}},mounted(){this.filter_modal=new bootstrap.Modal(document.getElementById("wrapper-filter-modal")),this.door=this.modelValue},methods:{editWrapper(s){var e;if(this.edited_wrapper&&((e=this.edited_wrapper)==null?void 0:e.id)===s.id){this.edited_wrapper=null;return}this.edited_wrapper=null,this.$nextTick(()=>{this.edited_wrapper=s})},reloadHandles(){this.$store.dispatch("updatedFormattedSizes").then(s=>{window.dispatchEvent(new CustomEvent("load-sizes",{detail:null})),this.$notify({title:"DoDoors",text:"Вы успешно обновили данные"})})},removeSelectedHandle(){this.edited_wrapper&&(this.edit_loading=!0,this.$store.dispatch("removeHandle",{handleId:this.edited_wrapper.id}).then(()=>{this.edit_loading=!1,this.reloadHandles()}).catch(()=>{this.edit_loading=!1}))},saveEditedHandle(){this.edited_wrapper&&(this.edit_loading=!0,this.$store.dispatch("fastEditHandle",{handle:this.edited_wrapper}).then(s=>{this.$notify({title:"DoDoors",text:"Вы сохранили данные по ручке"}),this.edit_loading=!1,this.edited_wrapper=null,this.reloadHandles()}).catch(s=>{this.edit_loading=!1,this.$notify({title:"DoDoors",text:"Ошибка сохранения ручки",type:"error"})}))},showFilterModal(){this.edited_wrapper=null,this.filter_modal.show()},selectWrapper(s){let e=this.success_added.findIndex(t=>t===s.title);e!=-1&&this.success_added.splice(e,1),this.door.handle_wrapper_type=s??{title:null},this.edited_wrapper=null,this.filter_modal.hide()},removeHandle(s){this.new_wrappers.splice(s,1)},addNewHandle(){this.new_wrappers.push({title:"",price:0})},reset(){this.edited_wrapper=null,this.filter_modal.hide(),this.door.handle_wrapper_type={title:null},this.searchQuery=""}}},fs={class:"card-body px-2 py-1"},ms=o("label",{class:"font-size-10"},[o("i",{class:"fa-solid fa-ruler-vertical"}),F(" Выбор завертки")],-1),vs={key:0},gs={class:"modal fade",id:"wrapper-filter-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ys={class:"modal-dialog modal-lg"},bs={class:"modal-content"},ws=o("div",{class:"modal-header"},[o("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Варианты заверток"),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Fs={key:0,class:"modal-body"},ks={key:0,class:"fw-bold mb-2"},$s={class:"small text-secondary"},Cs=["onClick"],Vs=o("i",{class:"fa-solid fa-arrow-left"},null,-1),Ds={class:"form-floating"},Ss=["id","onUpdate:modelValue"],Is=["for"],zs={class:"form-floating"},Us=["id","onUpdate:modelValue"],Ms=["for"],Hs=["onClick"],js={class:"d-flex flex-start"},Es=["disabled"],Ls=o("i",{class:"fa-solid fa-plus"},null,-1),Rs={class:"list-group"},Ts=["onClick"],Ps={key:0,class:"fa-solid fa-pen-to-square text-success"},qs={key:1,class:"fa-solid fa-xmark text-danger"},As=["onClick"],Os={class:"form-floating mb-2"},Bs=["id"],Ns=["for"],Ws={class:"input-group mb-2"},Qs={class:"form-floating"},Gs=["id"],Js=["for"],Ks={class:"form-floating"},Xs=["id"],Ys=["for"],Zs={class:"form-floating"},xs=["id"],el=["for"],ol={class:"form-floating"},tl=["id"],sl=["for"],ll={class:"d-flex justify-content-between"},rl=["disabled"],il={key:0,class:"fa-solid fa-floppy-disk mr-2"},dl={key:1,id:"preloader",class:"d-inline-flex justify-content-center align-items-center mr-2"},nl=o("div",{class:"spinner-border spinner-border-sm text-white",role:"status"},[o("span",{class:"visually-hidden"},"Загрузка...")],-1),al=[nl],cl=["disabled"],hl={key:0,class:"fa-solid fa-trash-can mr-2"},pl={key:1,id:"preloader",class:"d-inline-flex justify-content-center align-items-center mr-2"},_l=o("div",{class:"spinner-border spinner-border-sm text-white",role:"status"},[o("span",{class:"visually-hidden"},"Загрузка...")],-1),ul=[_l];function fl(s,e,t,i,l,n){var c;return d(),a(w,null,[o("div",{onClick:e[0]||(e[0]=(...h)=>n.showFilterModal&&n.showFilterModal(...h)),class:"card rounded-0 border-black cursor-pointer"},[o("div",fs,[ms,l.door?(d(),a("p",vs,u(((c=l.door.handle_wrapper_type)==null?void 0:c.title)||"не выбрано"),1)):p("",!0)])]),o("div",gs,[o("div",ys,[o("div",bs,[ws,l.door?(d(),a("div",Fs,[o("button",{type:"button",class:"btn btn-outline-secondary w-100 rounded-0 p-3 mb-2",onClick:e[1]||(e[1]=(...h)=>n.reset&&n.reset(...h))},"Не выбрано "),l.new_wrappers.length>0?(d(),a("h6",ks,[F("Добавленные завертки "),o("span",$s,u(l.new_wrappers.length)+"/10",1)])):p("",!0),(d(!0),a(w,null,$(l.new_wrappers,(h,f)=>(d(),a("div",{key:"handle"+f,class:"input-group mb-2"},[o("button",{onClick:m=>n.selectWrapper(h),class:"btn border-black rounded-0",type:"button"},[Vs,F(" Выбрать ")],8,Cs),o("div",Ds,[v(o("input",{type:"text",class:"form-control",id:"fast-new-wrapper-title-"+f,"onUpdate:modelValue":m=>l.new_wrappers[f].title=m},null,8,Ss),[[V,l.new_wrappers[f].title]]),o("label",{for:"fast-new-wrapper-title-"+f},"Название",8,Is)]),o("div",zs,[v(o("input",{type:"number",class:"form-control",id:"fast-new-wrapper-price-"+f,"onUpdate:modelValue":m=>l.new_wrappers[f].price=m},null,8,Us),[[V,l.new_wrappers[f].price]]),o("label",{for:"fast-new-wrapper-price-"+f},"Цена, руб",8,Ms)]),o("button",{onClick:m=>n.removeHandle(f),class:"btn btn-dark rounded-0",type:"button"},"Удалить ",8,Hs)]))),128)),o("div",js,[o("button",{type:"button",disabled:l.new_wrappers.length>=10,onClick:e[2]||(e[2]=(...h)=>n.addNewHandle&&n.addNewHandle(...h)),class:k([{"btn-outline-dark":l.new_wrappers.length>0,"btn-dark":l.new_wrappers.length===0},"btn rounded-0 mb-3"])},[Ls,F(" Добавить новую завертку ")],10,Es)]),o("ul",Rs,[(d(!0),a(w,null,$(n.filteredItems,(h,f)=>{var m,C;return d(),a("div",{key:h.title,class:k(["list-group-item cursor-pointer",{"list-group-item-primary":l.door.handle_wrapper_type===h,"list-group-item-success":l.success_added.indexOf(h.title)!=-1&&h.id!=null,"list-group-item-warning":l.success_added.indexOf(h.title)!=-1&&h.id==null}])},[o("a",{href:"javascript:void(0)",onClick:y=>n.editWrapper(h),class:"mr-2"},[((m=l.edited_wrapper)==null?void 0:m.id)!==h.id?(d(),a("i",Ps)):(d(),a("i",qs))],8,Ts),o("span",{onClick:y=>n.selectWrapper(h)},u(h.title),9,As),((C=l.edited_wrapper)==null?void 0:C.id)===h.id?(d(),a("form",{key:0,onSubmit:e[9]||(e[9]=ee((...y)=>n.saveEditedHandle&&n.saveEditedHandle(...y),["prevent"]))},[o("div",Os,[v(o("input",{type:"text",class:"form-control",id:"edit-fast-new-handle-title-"+h.id,"onUpdate:modelValue":e[3]||(e[3]=y=>l.edited_wrapper.title=y),required:""},null,8,Bs),[[V,l.edited_wrapper.title]]),o("label",{for:"edit-fast-new-handle-title-"+h.id},"Название",8,Ns)]),o("div",Ws,[o("div",Qs,[v(o("input",{type:"number",class:"form-control",id:"edit-fast-new-handle-price-wholesale-"+h.id,"onUpdate:modelValue":e[4]||(e[4]=y=>l.edited_wrapper.price.wholesale=y),required:""},null,8,Gs),[[V,l.edited_wrapper.price.wholesale]]),o("label",{for:"edit-fast-new-handle-price-wholesale-"+h.id},"Оптовая цена, руб",8,Js)]),o("div",Ks,[v(o("input",{type:"number",class:"form-control",id:"edit-fast-new-handle-price-dealer-"+h.id,"onUpdate:modelValue":e[5]||(e[5]=y=>l.edited_wrapper.price.dealer=y),required:""},null,8,Xs),[[V,l.edited_wrapper.price.dealer]]),o("label",{for:"edit-fast-new-handle-price-dealer-"+h.id},"Цена дилера, руб",8,Ys)]),o("div",Zs,[v(o("input",{type:"number",class:"form-control",id:"edit-fast-new-handle-price-retail-"+h.id,"onUpdate:modelValue":e[6]||(e[6]=y=>l.edited_wrapper.price.retail=y),required:""},null,8,xs),[[V,l.edited_wrapper.price.retail]]),o("label",{for:"edit-fast-new-handle-price-retail-"+h.id},"Розничная цена, руб",8,el)]),o("div",ol,[v(o("input",{type:"number",class:"form-control",id:"edit-fast-new-handle-price-cost-"+h.id,"onUpdate:modelValue":e[7]||(e[7]=y=>l.edited_wrapper.price.cost=y),required:""},null,8,tl),[[V,l.edited_wrapper.price.cost]]),o("label",{for:"edit-fast-new-handle-price-cost-"+h.id},"Себестоимость, руб",8,sl)])]),o("div",ll,[o("button",{disabled:l.edit_loading,class:"btn btn-dark rounded-0",type:"submit"},[l.edit_loading?p("",!0):(d(),a("i",il)),l.edit_loading?(d(),a("div",dl,al)):p("",!0),F(" Сохранить ")],8,rl),o("button",{disabled:l.edit_loading,onClick:e[8]||(e[8]=(...y)=>n.removeSelectedHandle&&n.removeSelectedHandle(...y)),class:"btn bg-danger text-white rounded-0",type:"button"},[l.edit_loading?p("",!0):(d(),a("i",hl)),l.edit_loading?(d(),a("div",pl,ul)):p("",!0),F(" Удалить завертку ")],8,cl)])],32)):p("",!0)],2)}),128))])])):p("",!0)])])])],64)}const ml=oe(us,[["render",fl]]),vl={class:"col-md-6"},gl={class:"row"},yl={class:"col-md-6 col-12 mb-2"},bl={class:"col-md-6 col-12"},wl={class:"input-group mb-2"},Fl={class:"form-floating"},kl=o("label",{for:"floatingInput"},[o("i",{class:"fa-solid fa-signs-post"}),F(" Назначение двери")],-1),$l=o("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[o("i",{class:"fa-solid fa-up-right-and-down-left-from-center"})],-1),Cl={class:"dropdown-menu dropdown-menu-end rounded-0"},Vl=o("li",null,[o("hr",{class:"dropdown-divider"})],-1),Dl=["onClick"],Sl={class:"col-md-6 col-12"},Il={class:"input-group mb-2"},zl={class:"form-floating"},Ul=o("label",{for:"floatingInput"},[o("i",{class:"fa-solid fa-ruler-vertical"}),F(" Высота, мм")],-1),Ml=o("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[o("i",{class:"fa-solid fa-up-right-and-down-left-from-center"})],-1),Hl={class:"dropdown-menu dropdown-menu-end rounded-0"},jl=o("li",null,[o("hr",{class:"dropdown-divider"})],-1),El={class:"p-1"},Ll={class:"form-floating"},Rl=o("label",{for:"filtered-height"},"Фильтр высоты",-1),Tl=o("li",null,[o("hr",{class:"dropdown-divider"})],-1),Pl={class:"scrollable-menu p-2"},ql=["onClick"],Al={key:0,class:"text-center"},Ol={class:"col-md-6 col-12"},Bl={class:"input-group mb-2"},Nl={class:"form-floating"},Wl=o("label",{for:"floatingInput"},[o("i",{class:"fa-solid fa-ruler-horizontal"}),F(" Ширина, мм")],-1),Ql=o("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[o("i",{class:"fa-solid fa-up-right-and-down-left-from-center"})],-1),Gl={class:"dropdown-menu dropdown-menu-end rounded-0"},Jl=o("li",null,[o("hr",{class:"dropdown-divider"})],-1),Kl={class:"p-1"},Xl={class:"form-floating"},Yl=o("label",{for:"filtered-height"},"Фильтр ширины",-1),Zl=o("li",null,[o("hr",{class:"dropdown-divider"})],-1),xl={class:"scrollable-menu p-2"},er=["onClick"],or={key:0,class:"text-center"},tr={class:"col-md-6 col-12"},sr={class:"form-floating mb-2"},lr=o("option",{value:{title:null}},"Выберите один из вариантов",-1),rr=["value"],ir=o("label",{for:"floatingSelect"},[o("i",{class:"fa-brands fa-openid"}),F(" Тип открытия двери и толщина")],-1),dr={class:"col-md-6 col-12"},nr={class:"form-floating mb-2"},ar=["value"],cr=o("label",{for:"door-type"},[o("i",{class:"fa-solid fa-door-open"}),F(" Выберите тип двери")],-1),hr={class:"col-md-6 col-12"},pr={class:"form-floating mb-2"},_r=["value"],ur=o("label",{for:"floatingSelect"},[o("i",{class:"fa-solid fa-industry"}),F(" Производитель петель")],-1),fr={class:"col-md-6 col-12"},mr={class:"form-floating mb-2"},vr=["value"],gr=o("label",{for:"floatingSelect"},[o("i",{class:"fa-solid fa-angles-left"}),F(" Сторона петель")],-1),yr={class:"col-md-6 col-12 mb-2"},br={class:"input-group"},wr={class:"form-floating"},Fr=o("option",{value:{title:null}},"Выберите один из вариантов",-1),kr=["value"],$r=o("label",{for:"floatingSelect"},[o("i",{class:"fa-solid fa-paint-roller"}),F(" Отделка первой стороны ")],-1),Cr=o("i",{class:"fa-solid fa-images"},null,-1),Vr=[Cr],Dr={key:0,style:{"line-height":"100%"}},Sr=o("small",null,[o("em",null,[o("strong",{class:"text-danger"},"Внимание!"),F(" сочетание размера и материала не доступно для заказа!")])],-1),Ir=[Sr],zr={class:"col-md-6 col-12"},Ur={key:1,class:"card rounded-0"},Mr=o("div",{class:"card-body p-3 disabled-element"},[o("p",{class:"text-center"},'Выбрано "Под покраску"')],-1),Hr=[Mr],jr={class:"col-md-6 col-12 mb-2"},Er={class:"input-group"},Lr={class:"form-floating"},Rr=o("option",{value:{title:null}},"Выберите один из вариантов",-1),Tr=["value"],Pr=o("label",{for:"floatingSelect"},[o("i",{class:"fa-solid fa-paint-roller"}),F(" Отделка второй стороны")],-1),qr=o("i",{class:"fa-solid fa-images"},null,-1),Ar=[qr],Or={key:0,style:{"line-height":"100%"}},Br=o("small",null,[o("em",null,[o("strong",{class:"text-danger"},"Внимание!"),F(" сочетание размера и материала не доступно для заказа!")])],-1),Nr=[Br],Wr={class:"col-md-6 col-12 mb-2"},Qr={key:1,class:"card rounded-0"},Gr=o("div",{class:"card-body p-3 disabled-element"},[o("p",{class:"text-center"},'Выбрано "Под покраску"')],-1),Jr=[Gr],Kr={class:"col-md-6 col-12"},Xr={class:"col-md-6 col-12"},Yr={class:"col-md-6 col-12"},Zr={key:0,class:"col-md-6 col-12"},xr={class:"form-floating w-100"},ei=["value"],oi=o("label",{for:"door-service-painting"},"Выберите вариант",-1),ti={class:"col-12"},si={class:"form-floating"},li=o("label",{for:"door-comment"},"Комментарий к двери",-1),ri={key:0,class:"row py-3"},ii={class:"col-12 d-flex align-items-center"},di={class:"form-check form-switch"},ni=o("label",{class:"form-check-label",for:"need-handle-holes"}," Нужна ручка \\ не нужна ручка ",-1),ai={key:0,class:"col-md-6 col-12"},ci={class:"form-floating mb-2"},hi=["value"],pi=o("label",{for:"floatingSelect"},"Отверстия под ручку",-1),_i={key:1,class:"col-md-6 col-12 mb-2"},ui={key:2,class:"col-md-6 offset-md-6 mb-2 col-12"},fi={key:3,class:"col-12"},mi={class:"row"},vi={class:"col-12 d-flex justify-content-between"},gi={class:"mb-2"},yi={class:"col-lg-3 col-md-3 col-12 mb-2"},bi=["href"],wi={style:{"min-height":"200px",display:"flex","justify-content":"center","align-items":"center"},class:"card-img-top object-fit-contain",alt:"..."},Fi={key:0,class:"card-body"},ki={key:0,class:"font-bold"},$i={key:1,class:"card-text"},Ci={key:4,class:"col-12"},Vi=o("div",{class:"alert alert-warning rounded-0 mb-2",role:"alert"},[o("p",null,"Вариантов изображений ручки нет")],-1),Di=[Vi],Si={key:5,class:"col-12 d-flex align-items-center mb-2"},Ii={class:"form-floating w-100"},zi=o("option",{value:{title:null}},"Не выбрано",-1),Ui=["value"],Mi=o("label",{for:"door-service-painting"},"Услуги по монтажу ручки",-1),Hi={class:"col-12 d-flex align-items-center"},ji={class:"form-check form-switch"},Ei=o("label",{class:"form-check-label",for:"need-upper-jumper"}," Нужна верхняя перемычка ",-1),Li={class:"col-12 d-flex align-items-center"},Ri={class:"form-check form-switch"},Ti=o("label",{class:"form-check-label",for:"need-automatic-doorstep"}," Нужен автоматический порог \\ не нужен ",-1),Pi={key:6,class:"col-12 d-flex align-items-center"},qi={class:"form-floating w-100 my-3"},Ai=["value"],Oi=o("label",{for:"door-service-doorstep"},"Выберите вариант",-1),Bi={class:"col-12 d-flex align-items-center"},Ni={class:"form-check form-switch"},Wi=o("label",{class:"form-check-label",for:"need-hidden-stopper"}," Нужен скрытый стопор \\ не нужен ",-1),Qi={key:7,class:"col-12 d-flex align-items-center"},Gi={class:"form-floating w-100 my-3"},Ji=["value"],Ki=o("label",{for:"door-service-stopper"},"Выберите вариант",-1),Xi={class:"col-12 d-flex align-items-center"},Yi={class:"form-check form-switch"},Zi=o("label",{class:"form-check-label",for:"need-hidden-door-closer"}," Нужен скрытый доводчик \\ не нужен ",-1),xi={key:8,class:"col-12 d-flex align-items-center"},ed={class:"form-floating w-100 my-3"},od=["value"],td=o("label",{for:"door-service-door_closer"},"Выберите вариант",-1),sd={class:"col-12 d-flex align-items-center"},ld={class:"form-check form-switch"},rd=o("label",{class:"form-check-label",for:"need-hidden-skirting-board"}," Нужен скрытый плинтус \\ не нужен ",-1),id={class:"col-12 d-flex align-items-center"},dd={class:"form-check form-switch"},nd=o("label",{class:"form-check-label",for:"need-door-install"}," Нужна установка двери \\ не нужна ",-1),ad={class:"col-12 d-flex align-items-center"},cd={class:"form-check form-switch"},hd=o("label",{class:"form-check-label",for:"need-door-wrapper"}," Нужна упаковка двери \\ не нужна ",-1),pd={class:"col-md-6"},_d={class:"preview"},ud={class:"card rounded-0 mt-3"},fd={class:"card-body"},md=o("h6",null,"Характеристики ",-1),vd={class:"text-muted font-bold"},gd={class:"text-black mb-0"},yd={key:0,class:"mr-1"},bd={key:1,class:"mr-1"},wd={key:2,class:"mr-1"},Fd={key:3,class:"mr-1"},kd={key:4,class:"mr-1"},$d={key:5,class:"mr-1"},Cd={key:6,class:"mr-1"},Vd={key:7,class:"mr-1"},Dd={key:8,class:"mr-1"},Sd={key:9,class:"mr-1"},Id={key:10,class:"mr-1"},zd={key:11,class:"mr-1"},Ud={key:12,class:"mr-1"},Md={key:13,class:"mr-1"},Hd={key:0},jd={key:1},Ed={key:1,class:"card rounded-0 mt-3"},Ld={class:"card-body"},Rd={class:"table"},Td=o("br",null,null,-1),Pd={key:0},qd=o("br",null,null,-1),Ad={class:"col-12 mt-2"},Od={class:"row bg-white"},Bd={class:"form-floating"},Nd=["value"],Wd=o("label",{for:"door-type"},"Тип цены",-1),Qd={key:0,class:"col-md-2"},Gd={class:"form-floating"},Jd=o("label",{for:"floatingInput"},"Процент дилера",-1),Kd={class:"col-md-4 d-flex justify-between"},Xd=o("i",{class:"fa-solid fa-minus"},null,-1),Yd=[Xd],Zd={class:"input-group"},xd=o("i",{class:"fa-solid fa-plus"},null,-1),en=[xd],on={class:"col-md-2 d-flex justify-center align-items-center"},tn={class:"text-center text-primary font-bold text-black",style:{"font-size":"16px"}},sn={class:"col-md-2 d-flex"},ln=["disabled"],rn=o("i",{class:"fa-solid fa-floppy-disk"},null,-1),dn={class:"col-12"},nn=["onClick"],an=o("strong",null,"Внимание!",-1),cn={key:1,class:"row"},hn=o("div",{class:"col-12"},[o("div",{class:"d-flex justify-content-center align-items-center flex-column",style:{"min-height":"500px"}},[o("h5",null,"Загружаем страничку...."),o("div",{class:"spinner-border my-3",role:"status"},[o("span",{class:"visually-hidden"},"Loading...")])])],-1),pn=[hn],_n={class:"modal fade",id:"editor-confirm-dialog-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},un={class:"modal-dialog modal-dialog-centered"},fn={class:"modal-content rounded-0"},mn={class:"modal-body"},vn=o("div",{class:"d-flex justify-center p-3"},[o("img",{src:"/images/logo.png",style:{width:"100px"},alt:""})],-1),gn={class:"font-bold text-center py-3"},yn={class:"text-center pb-3"},bn={class:"row"},wn={class:"col-6"},Fn={class:"col-6"},kn=["id"],$n={class:"modal-dialog modal-lg"},Cn={class:"modal-content"},Vn=o("div",{class:"modal-header"},[o("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Выбор типа материала для первый стороны"),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},[o("i",{class:"fa-solid fa-xmark"})])],-1),Dn={class:"modal-body"},Sn=o("div",{class:"modal-footer"},[o("button",{type:"button",class:"btn btn-secondary text-secondary","data-bs-dismiss":"modal","aria-label":"Close"},"Закрыть ")],-1),In=["id"],zn={class:"modal-dialog modal-lg"},Un={class:"modal-content"},Mn=o("div",{class:"modal-header"},[o("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Выбор типа материала для второй стороны"),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},[o("i",{class:"fa-solid fa-xmark"})])],-1),Hn={class:"modal-body"},jn=o("div",{class:"modal-footer"},[o("button",{type:"button",class:"btn btn-secondary text-secondary","data-bs-dismiss":"modal","aria-label":"Close"},"Закрыть ")],-1),En={class:"modal fade",id:"show-current-handle-details",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Ln={class:"modal-dialog"},Rn={class:"modal-content"},Tn=o("div",{class:"modal-header"},[o("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Просмотр деталей"),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Pn={class:"modal-body"},qn={name:"MyComponent",props:["door","editOrder"],data(){return{loaded:!1,selectedHandle:null,type_dictionary:{size:"Петли",handle_holes_type:"Ручка",handle_wrapper_type:"Завертка",opening_type:"Тип открытия двери и толщина",box_and_frame_color:"Цвет короба и каркаса",door_type:"Тип двери",front_side_finish_color:"Цвет отделки внешней стороны",back_side_finish_color:"Цвет отделки внутренней стороны",seal_color:"Цвет уплотнителя",fittings_color:"Цвет фурнитуры",hinge_manufacturer:"Производитель петель",front_side_finish:"Отделка внешней стороны",back_side_finish:"Отделка внутренней стороны",base:"База (под покраску)",service_doorstep:"Работа с порогом",service_painting:"Покраска фурнитуры",service_door_closer:"Работа с доводчиком",service_handle:"Услуги по монтажу ручки",service_stopper:"Работа со стопором"},tmp_prices:[],need_addition:!0,messages:[],filterHeight:null,filterWidth:null,selectedColorParam:null,loadedParams:!0,confirmModal:null,finishFrontVariantModal:null,finishBackVariantModal:null,colors:[],confirm:{title:null,message:null},color_sync_update:!1,doorForm:{id:null,width:0,height:0,depth:0,count:1,price:0,size:null,purpose:null,comment:null,dealer_percent:0,opening_type:{title:null},box_and_frame_color:{title:null},door_type:{title:null},front_side_finish:{title:null},back_side_finish:{title:null},front_side_finish_color:{title:null},back_side_finish_color:{title:null},seal_color:{title:null},fittings_color:{title:null},loops:{title:null},loops_count:0,price_type:{title:null},hinge_manufacturer:{title:null},handle_holes:{title:null},handle_holes_type:{title:null},handle_wrapper_type:{title:null},need_handle_holes:!0,need_upper_jumper:!0,need_automatic_doorstep:!1,need_hidden_stopper:!1,need_hidden_door_closer:!1,need_hidden_skirting_board:!1,need_door_install:!1,need_wrapper:!0,service_doorstep:{title:null},service_painting:{title:null},service_stopper:{title:null},service_door_closer:{title:null},service_handle:{title:null}}}},computed:{...G(["getErrors","getDictionary","cartTotalCount","cartProducts","cartTotalPrice"]),resultPrice(){return this.doorForm.price_type.id!==3?this.summaryPrice:this.summaryPriceWithDealer},summaryPriceWithDealer(){return Math.round((this.summaryPrice||0)*(1+(this.doorForm.dealer_percent||0)/100))},shortDoorTitle(){var t;let s=((t=this.doorForm.door_type)==null?void 0:t.title)||"КДС";return{"Комплект двери скрытого монтажа":"КДС"}[s]||s},summaryPrice(){var m,C,y;let s=0,e=null;this.tmp_prices=[];let t=this.doorForm.price_type.key;Object.keys(this.doorForm).forEach(_=>{var D,I;let b=!1;if(_&&typeof this.doorForm[_]=="object"&&this.doorForm[_]!=null&&_!=="door_type"){if(_==="opening_type"&&this.doorForm[_].sizes){b=!0;let r=this.doorForm[_].sizes.findIndex(z=>z.width==this.doorForm.width&&z.height==this.doorForm.height),g=r===-1?0:this.doorForm[_].sizes[r].price[t];s+=parseInt(g||0),this.tmp_prices.push({type:_,price:g})}if(_.indexOf("_color")!==-1&&this.doorForm[_].sizes&&!b){b=!0;let r=(this.doorForm[_]||{excludes:[]}).excludes.indexOf(_.substring(0,_.indexOf("_color")))!==-1,g=0;if(!this.doorForm[_].assign_with_size)g=r?0:this.doorForm[_].sizes[0].price[t];else{let z=this.doorForm[_].sizes.findIndex(S=>S.width==this.doorForm.width&&S.height==this.doorForm.height);g=z===-1||r?0:this.doorForm[_].sizes[z].price[t]}s+=parseInt(g||0),this.tmp_prices.push({type:_,price:g})}if(_==="hinge_manufacturer"&&this.doorForm[_].title!=null&&!b){b=!0;let r=this.doorForm[_].price[t],g=0;this.doorForm.size&&(g=(((D=this.doorForm.size.loops)==null?void 0:D.count)||0)*r),s+=parseInt(g||0),this.tmp_prices.push({type:_,price:r,full_price:g})}if(_==="size"&&this.doorForm[_].loops.price&&!b){b=!0;let r=this.doorForm[_].loops.price[t];s+=parseInt(r||0),this.tmp_prices.push({type:_,price:r})}if(["service_doorstep","service_stopper","service_door_closer","service_handle"].indexOf(_)!==-1&&this.doorForm[_].title!=null&&!b){b=!0;let r=this.doorForm[_].price[t];s+=parseInt(r||0),this.tmp_prices.push({type:_,price:r})}if(_==="service_painting"&&this.doorForm[_].title!=null&&!b){b=!0;let r=this.doorForm.fittings_color.is_ral?this.doorForm[_].price[t]:0,g=0;this.doorForm.size&&(g=((((I=this.doorForm.size.loops)==null?void 0:I.count)||0)+1)*r),s+=g||0,this.tmp_prices.push({type:_,price:r,full_price:g})}if(this.doorForm[_].price&&!b){let r=typeof this.doorForm[_].price=="object"?this.doorForm[_].price[t]||0:this.doorForm[_].price||0;s+=parseInt(r||0),this.tmp_prices.push({type:_,price:r})}}});let i=this.getDictionary.prices,l=0,n=!1,c=null;i.forEach(_=>{var b;_.width===this.doorForm.width&&_.height===this.doorForm.height&&(n=!0,c=_,this.doorForm.loops_count=((b=_.loops)==null?void 0:b.count)||2)});let h=_=>{let b=typeof this.doorForm.door_type.price=="object"?this.doorForm.door_type.price[t]:this.doorForm.door_type.price,D=this.doorForm.door_type.id!==3?1:.8,I=this.doorForm.door_type.need_percent_price?_*b/100:_*D+b;return this.tmp_prices.push({type:"door_type",price:(I||0)>0?I:_}),(I||0)>0?I:_};if(n){e=c.materials.find(b=>b.is_base)||{price:{wholesale:0,dealer:0,retail:0,cost:0}};let _=typeof e.price=="object"?e.price[t]:e.price;this.tmp_prices.push({type:"base",price:_}),l=parseInt(h(_)),c.materials.forEach(b=>{if(b.id===this.doorForm.front_side_finish.id&&!this.doorForm.front_side_finish.is_base){let D=typeof b.price=="object"?b.price[t]:b.price;l+=D,this.tmp_prices.push({type:"front_side_finish",price:D})}if(b.id===this.doorForm.back_side_finish.id&&!this.doorForm.back_side_finish.is_base){let D=typeof b.price=="object"?b.price[t]:b.price;l+=D,this.tmp_prices.push({type:"back_side_finish",price:D})}})}else{let _=function(g,z=0){if(g.length===0)return-1;for(var S=g[0].height,L=0,T=1;T<g.length;T++)g[T].height>S&&z===0&&(L=T,S=g[T].height),g[T].height<S&&z===1&&(L=T,S=g[T].height);return L};const b=Math.max(...i.map(g=>g.height)),D=_(i,0),I=Math.min(...i.map(g=>g.height)),r=_(i,1);(this.doorForm.height>b||this.doorForm.height<I)&&(this.doorForm.loops_count=((C=(m=i[this.doorForm.height>b?D:r])==null?void 0:m.loops)==null?void 0:C.count)||2);for(let g=0;g<i.length;g++)if(i[g].width>=this.doorForm.width&&i[g].height>=this.doorForm.height){this.doorForm.loops_count=((y=i[g].loops)==null?void 0:y.count)||2,e=i[g].materials.find(S=>S.is_base)||{price:{wholesale:0,dealer:0,retail:0,cost:0}};let z=typeof e.price=="object"?e.price[t]:e.price;this.tmp_prices.push({type:"base",price:z}),l=parseInt(h(z)),i[g].materials.forEach(S=>{if(S.id===this.doorForm.front_side_finish.id&&!this.doorForm.front_side_finish.is_base){let L=typeof S.price=="object"?S.price[t]:S.price;l+=L,this.tmp_prices.push({type:"front_side_finish",price:L})}}),i[g].materials.forEach(S=>{if(S.id===this.doorForm.back_side_finish.id&&!this.doorForm.back_side_finish.is_base){let L=typeof S.price=="object"?S.price[t]:S.price;l+=L,this.tmp_prices.push({type:"back_side_finish",price:L})}});break}}return(_=>Math.round(parseInt(_)/10)*10)(s+l)},filteredHeight(){return this.getDictionary?this.filterHeight?this.getDictionary.size_variants.filter(s=>(""+s.height).indexOf(this.filterHeight)!==-1):this.getDictionary.size_variants:[]},filteredWidth(){return this.getDictionary?this.filterWidth?this.getDictionary.size_variants.filter(s=>(""+s.width).indexOf(this.filterWidth)!==-1):this.getDictionary.size_variants:[]}},watch:{doorForm:{handler(s){console.log("doorForm",this.doorForm),this.loadedParams=!1,this.$nextTick(()=>{this.loadedParams=!0})},deep:!0},"doorForm.fittings_color":{handler(s){if(this.doorForm.fittings_color.title==null)this.doorForm.service_painting={title:null};else{let e=this.getServiceByType("service_painting");this.doorForm.service_painting=e.length>0?e[0]:{title:null}}},deep:!0},"doorForm.need_hidden_stopper":{handler(s){if(!this.doorForm.need_hidden_stopper)this.doorForm.service_stopper={title:null};else{let e=this.getServiceByType("service_stopper");this.doorForm.service_stopper=e.length>0?e[0]:{title:null}}},deep:!0},"doorForm.need_hidden_door_closer":{handler(s){if(!this.doorForm.need_hidden_door_closer)this.doorForm.service_door_closer={title:null};else{let e=this.getServiceByType("service_door_closer");this.doorForm.service_door_closer=e.length>0?e[0]:{title:null}}},deep:!0},"doorForm.need_automatic_doorstep":{handler(s){if(!this.doorForm.need_automatic_doorstep)this.doorForm.service_doorstep={title:null};else{let e=this.getServiceByType("service_doorstep");this.doorForm.service_doorstep=e.length>0?e[0]:{title:null}}},deep:!0},"doorForm.handle_holes":{handler(s){this.doorForm.handle_holes.id===3&&(this.doorForm.handle_holes_type={title:null},this.doorForm.handle_wrapper_type={title:null}),this.doorForm.handle_holes.id===1&&(this.doorForm.handle_wrapper_type={title:null})},deep:!0},"doorForm.need_handle_holes":{handler(s){this.doorForm.need_handle_holes||(this.doorForm.handle_holes=this.getDictionary.handle_holes_variants[0],this.doorForm.handle_holes_type={title:null},this.doorForm.handle_wrapper_type={title:null})},deep:!0},"doorForm.opening_type":{handler(s){if(this.doorForm.opening_type){let e=this.getDictionary.opening_variants.find(t=>t.id===this.doorForm.opening_type.id);e&&(this.doorForm.depth=e.depth||0)}},deep:!0},summaryPriceWithDealer:{handler(s){this.doorForm.price=this.summaryPriceWithDealer},deep:!0},summaryPrice:{handler(s){var t;let e=((t=this.tmp_prices.find(i=>i.type==="door_type"))==null?void 0:t.price)||0;this.doorForm.price=this.summaryPrice,this.doorForm.base_price=e},deep:!0}},mounted(){this.detailsModal=new bootstrap.Modal(document.getElementById("show-current-handle-details"),{}),window.addEventListener("clear-cart",s=>{this.$store.dispatch("loadFormattedSizes").then(e=>{this.clearForm(),this.loaded=!0}).catch(()=>{})}),this.confirmModal=new bootstrap.Modal(document.getElementById("editor-confirm-dialog-modal"),{}),this.door?this.$store.dispatch("loadFormattedSizes").then(s=>{this.loaded=!1,this.$nextTick(()=>{var t,i;let e=this.door.product?this.door.product:this.door.door;console.log(e),this.doorForm.id=this.editOrder?this.door.id:this.door.product.id,this.doorForm.width=e.width,this.doorForm.height=e.height,this.doorForm.depth=e.depth,this.doorForm.count=this.editOrder?this.door.count:e.quantity,this.doorForm.size=e.size,this.doorForm.purpose=e.purpose||"Входная",this.doorForm.handle_holes=e.handle_holes||{title:null},this.doorForm.handle_holes_type=e.handle_holes_type||{title:null},this.doorForm.handle_wrapper_type=e.handle_wrapper_type||{title:null},this.doorForm.opening_type=e.opening_type||{title:null},this.doorForm.box_and_frame_color=e.box_and_frame_color||{title:null},this.doorForm.door_type=e.door_type||{title:null},this.doorForm.front_side_finish=e.front_side_finish||{title:null},this.doorForm.back_side_finish=e.back_side_finish||{title:null},this.doorForm.front_side_finish_color=e.front_side_finish_color||{title:null},this.doorForm.back_side_finish_color=e.back_side_finish_color||{title:null},this.doorForm.seal_color=e.seal_color||{title:null},this.doorForm.fittings_color=e.fittings_color||{title:null},this.doorForm.loops=e.loops||{title:null},this.doorForm.loops_count=e.loops_count||0,this.doorForm.price_type=e.price_type||{title:null},this.doorForm.hinge_manufacturer=e.hinge_manufacturer||{title:null},this.doorForm.need_handle_holes=e.need_handle_holes||!0,this.doorForm.need_upper_jumper=e.need_upper_jumper||!0,this.doorForm.need_automatic_doorstep=e.need_automatic_doorstep||!1,this.doorForm.need_hidden_stopper=e.need_hidden_stopper||!1,this.doorForm.need_hidden_door_closer=e.need_hidden_door_closer||!1,this.doorForm.need_hidden_skirting_board=e.need_hidden_skirting_board||!1,this.doorForm.need_door_install=e.need_door_install||!1,this.doorForm.need_wrapper=e.need_wrapper||!0,this.doorForm.service_doorstep=e.service_doorstep||{title:null},this.doorForm.service_painting=e.service_painting||{title:null},this.doorForm.service_stopper=e.service_stopper||{title:null},this.doorForm.service_door_closer=e.service_door_closer||{title:null},this.doorForm.service_handle=e.service_handle||{title:null},this.loaded=!0,this.cartTotalCount>0&&(this.doorForm.price_type=((i=(t=this.cartProducts[0])==null?void 0:t.product)==null?void 0:i.price_type)||{title:null})})}).catch(()=>{}):this.$store.dispatch("loadFormattedSizes").then(s=>{this.clearForm(),this.loaded=!0}).catch(()=>{})},methods:{showDetails(s){this.selectedHandle=null,this.$nextTick(()=>{this.selectedHandle=s,this.detailsModal.show()})},loadRalColors(){this.$store.dispatch("loadRalColors")},openConfirmModal(s,e){this.confirm.title=s||null,this.confirm.message=e||null,this.confirmModal.show()},selectSideFinish(s,e,t){this.doorForm[s][e][t].selected||!1||this.doorForm[s][e].forEach(l=>{l.selected&&delete l.selected}),this.doorForm[s][e][t].selected=!this.doorForm[s][e][t].selected},priceForSide(s){let e=this.doorForm.price_type.key,t=0,i=null,l=this.getDictionary.prices;return this.doorForm.width===0&&this.doorForm.height===0?0:(l.forEach(n=>{this.doorForm.width===n.width&&this.doorForm.height===n.height&&(i=n)}),i&&i.materials&&i.materials.forEach(n=>{n.id===this.doorForm[s].id&&(n.price,t=typeof n.price=="object"?n.price[e]:n.price)}),t)},clearForm(){this.loaded=!1,this.confirmModal.hide(),this.$nextTick(()=>{const s={purpose:"Дверь "+(this.cartProducts.length+1),id:he.v1(),count:1,width:this.getDictionary.size_variants[0].width,height:this.getDictionary.size_variants[0].height,size:this.getDictionary.size_variants[0],loops_count:this.getDictionary.size_variants[0].loops.count,handle_holes:this.getDictionary.handle_holes_variants[0],handle_holes_type:{title:null},handle_wrapper_type:{title:null},opening_type:this.getDictionary.opening_variants[0],box_and_frame_color:{title:null},door_type:this.getDictionary.door_variants[0],front_side_finish:this.getDictionary.finishes_variants[0],back_side_finish:this.getDictionary.finishes_variants[0],front_side_finish_color:{title:null},back_side_finish_color:{title:null},seal_color:{title:null},fittings_color:{title:null},loops:this.getDictionary.loops_variants[0],price_type:this.getDictionary.price_type_variants[0],hinge_manufacturer:this.getDictionary.hinge_manufacturer_variants[0],need_handle_holes:!0,need_upper_jumper:!0,need_automatic_doorstep:!1,need_hidden_stopper:!1,need_hidden_door_closer:!1,need_hidden_skirting_board:!1,need_door_install:!1,need_wrapper:!0,service_doorstep:{title:null},service_painting:{title:null},service_stopper:{title:null},service_door_closer:{title:null},service_handle:{title:null}};if(this.doorForm=s,this.cartTotalCount>0){const e=JSON.parse(localStorage.getItem("dodoors_handle_holes_type_selected"));e&&(this.doorForm.handle_holes_type=e)}this.loaded=!0})},selectDoorSize(s){if(s==null){this.doorForm.width=0,this.doorForm.height=0,this.doorForm.size=null,this.doorForm.loops_count=0;return}this.doorForm.width=s.width,this.doorForm.height=s.height,this.doorForm.size=s,this.doorForm.loops_count=s.loops.count},changeDoorCount(s){s==="add"&&this.doorForm.count++,s==="sub"&&this.doorForm.count>0&&this.doorForm.count--},selectFrontSideFinish(){(this.doorForm.front_side_finish.door_variants||[]).length!==0&&(this.finishFrontVariantModal=new bootstrap.Modal(document.getElementById("finish-front-variant-modal-"+this.doorForm.id),{}),this.finishFrontVariantModal.show())},selectBackSideFinish(){(this.doorForm.back_side_finish.door_variants||[]).length!==0&&(this.finishBackVariantModal=new bootstrap.Modal(document.getElementById("finish-back-variant-modal-"+this.doorForm.id),{}),this.finishBackVariantModal.show())},swapDoorstepStopper(s){this.doorForm.need_automatic_doorstep=this.doorForm.need_automatic_doorstep?s===0:!1,this.doorForm.need_hidden_stopper=this.doorForm.need_hidden_stopper?s===1:!1},getServiceByType(s){if((this.getDictionary.services||[]).length===0)return[];let e=this.getDictionary.services.filter(t=>t.type===s&&t.is_active);return e.length>0?e.sort((t,i)=>i.order_position-t.order_position):[]},alert(s){this.messages.push(s)},removeMessage(s){this.messages.splice(s,1)},syncColors(s,e){if(e.title=="RAL")return;const t=[{color:"Silver",box_and_frame_color:{title:"Серебро",code:"#c0c0c0"},seal_color:{title:"Серый",code:"#808080"},fittings_color:{title:"Серебро",code:"#c0c0c0"}},{color:"Black",box_and_frame_color:{title:"Черный",code:"#000000"},seal_color:{title:"Черный",code:"#000000"},fittings_color:{title:"Черный",code:"#000000"}},{color:"Gold",box_and_frame_color:{title:"Золотой",code:"#ffd700"},seal_color:{title:"Бежевый",code:"#f5f5dc"},fittings_color:{title:"Золотой",code:"#ffd700"}}];this.color_sync_update=!0,this.$nextTick(()=>{this.color_sync_update=!1;let i=t.find(l=>l.color===e.title);this.doorForm.box_and_frame_color={assign_with_size:e.assign_with_size,code:i?i.box_and_frame_color.code:e.code,title:i?i.box_and_frame_color.title:e.title,excludes:e.excludes,is_ral:e.is_ral,sizes:e.sizes,type:e.type},this.doorForm.seal_color={assign_with_size:e.assign_with_size,code:i?i.seal_color.code:e.code,title:i?i.seal_color.title:e.title,excludes:e.excludes,is_ral:e.is_ral,sizes:e.sizes,type:e.type},this.doorForm.fittings_color={assign_with_size:e.assign_with_size,code:i?i.fittings_color.code:e.code,title:i?i.fittings_color.title:e.title,excludes:e.excludes,is_ral:e.is_ral,sizes:e.sizes,type:e.type}})},submitForm(){if(this.messages=[],this.doorForm.detailing_price=this.tmp_prices,this.editOrder){console.log("Edit mode"),this.$store.dispatch("editDoorInOrder",{doorForm:this.doorForm}).then(s=>{this.$notify({title:"DoDoors",text:"Дверь успешно обновлена",type:"success"}),window.location.reload(),this.$emit("callback")}).catch(()=>{this.$notify({title:"DoDoors",text:"Ошибка редактирования данных",type:"error"})});return}this.$store.dispatch("addProductToCart",{product:this.doorForm,price:this.summaryPrice}).then(()=>{this.confirm.title="Товар успешно добавлен в корзину",this.confirm.message="Очистить форму?",this.confirmModal.show(),this.$notify({title:"DoDoors",text:"Дверь успешно добавлена в корзину",type:"success"})})}}},Wn=Object.assign(qn,{setup(s){return(e,t)=>{var l,n,c,h,f,m,C,y,_,b,D,I;const i=ie("lazy");return d(),a(w,null,[e.loaded?(d(),a("form",{key:0,class:"row",onSubmit:t[66]||(t[66]=ee((...r)=>e.submitForm&&e.submitForm(...r),["prevent"]))},[o("div",vl,[o("div",gl,[o("div",yl,[o("button",{type:"button",onClick:t[0]||(t[0]=r=>e.openConfirmModal("Внимание!","Вы очищает текущую работу в калькуляторе! Продолжить?")),class:"btn rounded-0 w-100 btn-dark p-3"},"Очистить форму ")]),o("div",bl,[o("div",wl,[o("div",Fl,[v(o("input",{type:"text",min:"0","onUpdate:modelValue":t[1]||(t[1]=r=>e.doorForm.purpose=r),class:"form-control",id:"floatingInput"},null,512),[[V,e.doorForm.purpose]]),kl]),$l,o("ul",Cl,[o("li",null,[o("a",{class:"dropdown-item",onClick:t[2]||(t[2]=r=>e.doorForm.purpose=null),href:"javascript:void(0)"},"Не выбрано")]),Vl,o("li",null,[(d(!0),a(w,null,$(e.getDictionary.purpose_variants,r=>(d(),a("a",{class:k(["dropdown-item",{"bg-primary text-white":e.doorForm.purpose===r}]),onClick:g=>e.doorForm.purpose=r,href:"javascript:void(0)"},u(r),11,Dl))),256))])])])]),o("div",Sl,[o("div",Il,[o("div",zl,[v(o("input",{type:"number",min:"0",onInvalid:t[3]||(t[3]=r=>e.alert("Вы не выбрали  ввели высоту двери!")),"onUpdate:modelValue":t[4]||(t[4]=r=>e.doorForm.height=r),class:"form-control",id:"floatingInput",required:""},null,544),[[V,e.doorForm.height]]),Ul]),Ml,o("ul",Hl,[o("li",null,[o("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[5]||(t[5]=r=>e.selectDoorSize(null))},"Не выбрано")]),jl,o("li",El,[o("div",Ll,[v(o("input",{type:"search","onUpdate:modelValue":t[6]||(t[6]=r=>e.filterHeight=r),class:"form-control",id:"filtered-height",placeholder:"name@example.com"},null,512),[[V,e.filterHeight]]),Rl])]),Tl,o("li",Pl,[(d(!0),a(w,null,$(e.filteredHeight,r=>(d(),a("a",{class:k(["dropdown-item",{"bg-primary":e.doorForm.width===r.width&&e.doorForm.width===r.height}]),onClick:g=>e.selectDoorSize(r),href:"javascript:void(0)"},u(r.height)+"x"+u(r.width),11,ql))),256)),e.filteredHeight.length===0?(d(),a("p",Al,"Ничего не найдено")):p("",!0)])])])]),o("div",Ol,[o("div",Bl,[o("div",Nl,[v(o("input",{type:"number",min:"0",onInvalid:t[7]||(t[7]=r=>e.alert("Вы не выбрали  ввели ширину двери!")),"onUpdate:modelValue":t[8]||(t[8]=r=>e.doorForm.width=r),class:"form-control",id:"floatingInput",required:""},null,544),[[V,e.doorForm.width]]),Wl]),Ql,o("ul",Gl,[o("li",null,[o("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[9]||(t[9]=r=>e.selectDoorSize(null))},"Не выбрано")]),Jl,o("li",Kl,[o("div",Xl,[v(o("input",{type:"search","onUpdate:modelValue":t[10]||(t[10]=r=>e.filterWidth=r),class:"form-control",id:"filtered-height",placeholder:"name@example.com"},null,512),[[V,e.filterWidth]]),Yl])]),Zl,o("li",xl,[(d(!0),a(w,null,$(e.filteredWidth,r=>(d(),a("a",{class:k(["dropdown-item",{"bg-primary text-white":e.doorForm.width===r.width&&e.doorForm.width===r.height}]),onClick:g=>e.selectDoorSize(r),href:"javascript:void(0)"},u(r.height)+"x"+u(r.width),11,er))),256)),e.filteredWidth.length===0?(d(),a("p",or,"Ничего не найдено")):p("",!0)])])])]),o("div",tr,[o("div",sr,[v(o("select",{class:"form-select","onUpdate:modelValue":t[11]||(t[11]=r=>e.doorForm.opening_type=r),onInvalid:t[12]||(t[12]=r=>e.alert("Вы не выбрали вариант открывания и толщину двери!")),id:"floatingSelect","aria-label":"Floating label select example",required:""},[lr,(d(!0),a(w,null,$(e.getDictionary.opening_variants,r=>(d(),a("option",{value:r},u(r.title)+" (толщина "+u(r.depth)+" мм) ",9,rr))),256))],544),[[R,e.doorForm.opening_type]]),ir])]),o("div",dr,[o("div",nr,[v(o("select",{class:"form-select","onUpdate:modelValue":t[13]||(t[13]=r=>e.doorForm.door_type=r),onInvalid:t[14]||(t[14]=r=>e.alert("Вы не выбрали тип двери!")),id:"door-type","aria-label":"door-type",required:""},[(d(!0),a(w,null,$(e.getDictionary.door_variants,r=>(d(),a("option",{value:r},u(r.title),9,ar))),256))],544),[[R,e.doorForm.door_type]]),cr])]),o("div",hr,[o("div",pr,[v(o("select",{class:"form-select","onUpdate:modelValue":t[15]||(t[15]=r=>e.doorForm.hinge_manufacturer=r),onInvalid:t[16]||(t[16]=r=>e.alert("Вы не выбрали расположение петель!")),id:"floatingSelect","aria-label":"Floating label select example",required:""},[(d(!0),a(w,null,$(e.getDictionary.hinge_manufacturer_variants,r=>(d(),a("option",{value:r},u(r.title),9,_r))),256))],544),[[R,e.doorForm.hinge_manufacturer]]),ur])]),o("div",fr,[o("div",mr,[v(o("select",{class:"form-select","onUpdate:modelValue":t[17]||(t[17]=r=>e.doorForm.loops=r),onInvalid:t[18]||(t[18]=r=>e.alert("Вы не выбрали сторону петель!")),id:"floatingSelect","aria-label":"Floating label select example",required:""},[(d(!0),a(w,null,$(e.getDictionary.loops_variants,r=>(d(),a("option",{value:r},u(r.title),9,vr))),256))],544),[[R,e.doorForm.loops]]),gr])]),o("div",yr,[o("div",br,[o("div",wr,[v(o("select",{class:"form-select",onInvalid:t[19]||(t[19]=r=>e.alert("Вы не выбрали отделку первой стороны двери!")),"onUpdate:modelValue":t[20]||(t[20]=r=>e.doorForm.front_side_finish=r),id:"floatingSelect","aria-label":"Floating label select example",required:""},[Fr,(d(!0),a(w,null,$(e.getDictionary.finishes_variants,r=>(d(),a("option",{value:r},u(r.title),9,kr))),256))],544),[[R,e.doorForm.front_side_finish]]),$r]),(e.doorForm.front_side_finish.door_variants||[]).length!==0?(d(),a("button",{key:0,onClick:t[21]||(t[21]=(...r)=>e.selectFrontSideFinish&&e.selectFrontSideFinish(...r)),class:"btn btn-outline-secondary rounded-0",type:"button"},Vr)):p("",!0)]),e.priceForSide("front_side_finish")===0?(d(),a("p",Dr,Ir)):p("",!0)]),o("div",zr,[e.doorForm.front_side_finish.title!=="Под покраску"?(d(),A(N,{key:0,material:e.doorForm.front_side_finish,filter:"front_side_finish_color",onInvalid:t[22]||(t[22]=r=>e.alert("Вы не выбрали цвет отделки первой стороны")),modelValue:e.doorForm.front_side_finish_color,"onUpdate:modelValue":t[23]||(t[23]=r=>e.doorForm.front_side_finish_color=r)},{name:B(()=>[F(" Цвет отделки первой стороны ")]),_:1},8,["material","modelValue"])):(d(),a("div",Ur,Hr))]),o("div",jr,[o("div",Er,[o("div",Lr,[v(o("select",{class:"form-select",onInvalid:t[24]||(t[24]=r=>e.alert("Вы не выбрали отделку второй стороны двери!")),"onUpdate:modelValue":t[25]||(t[25]=r=>e.doorForm.back_side_finish=r),id:"floatingSelect","aria-label":"Floating label select example",required:""},[Rr,(d(!0),a(w,null,$(e.getDictionary.finishes_variants,r=>(d(),a("option",{value:r},u(r.title),9,Tr))),256))],544),[[R,e.doorForm.back_side_finish]]),Pr]),(e.doorForm.back_side_finish.door_variants||[]).length!==0?(d(),a("button",{key:0,onClick:t[26]||(t[26]=(...r)=>e.selectBackSideFinish&&e.selectBackSideFinish(...r)),class:"btn btn-outline-secondary rounded-0",type:"button"},Ar)):p("",!0)]),e.priceForSide("back_side_finish")===0?(d(),a("p",Or,Nr)):p("",!0)]),o("div",Wr,[F(u()+" ",1),e.doorForm.back_side_finish.title!=="Под покраску"?(d(),A(N,{key:0,material:e.doorForm.back_side_finish,filter:"back_side_finish_color",onInvalid:t[27]||(t[27]=r=>e.alert("Вы не выбрали цвет отделки второй стороны")),modelValue:e.doorForm.back_side_finish_color,"onUpdate:modelValue":t[28]||(t[28]=r=>e.doorForm.back_side_finish_color=r)},{name:B(()=>[F(" Цвет отделки второй стороны ")]),_:1},8,["material","modelValue"])):(d(),a("div",Qr,Jr))]),o("div",Kr,[e.color_sync_update?p("",!0):(d(),A(N,{key:0,filter:"box_and_frame_color",onChange:t[29]||(t[29]=r=>e.syncColors("box_and_frame_color",r)),onInvalid:t[30]||(t[30]=r=>e.alert("Вы не выбрали цвет короба и каркаса")),modelValue:e.doorForm.box_and_frame_color,"onUpdate:modelValue":t[31]||(t[31]=r=>e.doorForm.box_and_frame_color=r)},{name:B(()=>[F(" Цвет короба и каркаса ")]),_:1},8,["modelValue"]))]),o("div",Xr,[e.color_sync_update?p("",!0):(d(),A(N,{key:0,filter:"seal_color",onInvalid:t[32]||(t[32]=r=>e.alert("Вы не выбрали цвет уплотнителя")),modelValue:e.doorForm.seal_color,"onUpdate:modelValue":t[33]||(t[33]=r=>e.doorForm.seal_color=r)},{name:B(()=>[F(" Цвет уплотнителя ")]),_:1},8,["modelValue"]))]),o("div",Yr,[e.color_sync_update?p("",!0):(d(),A(N,{key:0,filter:"fittings_color",onInvalid:t[34]||(t[34]=r=>e.alert("Вы не выбрали цвет фурнитуры")),modelValue:e.doorForm.fittings_color,"onUpdate:modelValue":t[35]||(t[35]=r=>e.doorForm.fittings_color=r)},{name:B(()=>[F(" Цвет фурнитуры ")]),_:1},8,["modelValue"]))]),e.doorForm.fittings_color.title!=null&&e.doorForm.fittings_color.is_ral?(d(),a("div",Zr,[o("div",xr,[v(o("select",{class:"form-select","onUpdate:modelValue":t[36]||(t[36]=r=>e.doorForm.service_painting=r),id:"door-service-painting","aria-label":"Floating label select example"},[(d(!0),a(w,null,$(e.getServiceByType("service_painting"),r=>(d(),a("option",{value:r},u(r.title||"-"),9,ei))),256))],512),[[R,e.doorForm.service_painting]]),oi])])):p("",!0),o("div",ti,[o("div",si,[v(o("textarea",{class:"form-control border-secondary rounded-0","onUpdate:modelValue":t[37]||(t[37]=r=>e.doorForm.comment=r),style:{"min-height":"100px"},placeholder:"Оставьте комментарий",id:"door-comment"},null,512),[[V,e.doorForm.comment]]),li])])]),e.need_addition?(d(),a("div",ri,[o("div",ii,[o("div",di,[v(o("input",{class:"form-check-input","onUpdate:modelValue":t[38]||(t[38]=r=>e.doorForm.need_handle_holes=r),type:"checkbox",role:"switch",id:"need-handle-holes",checked:""},null,512),[[P,e.doorForm.need_handle_holes]]),ni])]),e.doorForm.need_handle_holes?(d(),a("div",ai,[o("div",ci,[v(o("select",{class:"form-select",onInvalid:t[39]||(t[39]=r=>e.alert("Вы не выбрали отверстие под ручку!")),"onUpdate:modelValue":t[40]||(t[40]=r=>e.doorForm.handle_holes=r),id:"floatingSelect","aria-label":"Floating label select example",required:""},[(d(!0),a(w,null,$(e.getDictionary.handle_holes_variants,r=>(d(),a("option",{value:r},u(r.title),9,hi))),256))],544),[[R,e.doorForm.handle_holes]]),pi])])):p("",!0),e.doorForm.need_handle_holes&&e.doorForm.handle_holes.id!==3?(d(),a("div",_i,[W(_s,{modelValue:e.doorForm,"onUpdate:modelValue":t[41]||(t[41]=r=>e.doorForm=r)},null,8,["modelValue"]),o("a",{onClick:t[42]||(t[42]=r=>e.showDetails(e.doorForm.handle_holes_type)),href:"javascript:void(0)",class:"fst-italic cursor-pointer btn btn-link p-0"},"Дополнительные параметры ручки")])):p("",!0),e.doorForm.need_handle_holes&&e.doorForm.handle_holes.id===2?(d(),a("div",ui,[W(ml,{modelValue:e.doorForm,"onUpdate:modelValue":t[43]||(t[43]=r=>e.doorForm=r)},null,8,["modelValue"])])):p("",!0),(e.doorForm.handle_holes_type.variants||[]).length>0&&e.doorForm.need_handle_holes&&e.doorForm.handle_holes.id!==3?(d(),a("div",fi,[o("div",mi,[o("div",vi,[o("p",gi,[F('Цвет ручки "'+u(e.doorForm.handle_holes_type.color||"не указан")+'" ',1),e.doorForm.handle_holes_type.color?(d(),a("span",{key:0,class:"d-inline-block",style:O([{"background-color":e.doorForm.handle_holes_type.color},{width:"50px",height:"10px"}])},null,4)):p("",!0)])]),(d(!0),a(w,null,$(e.doorForm.handle_holes_type.variants,(r,g)=>(d(),a("div",yi,[o("div",{class:k(["card rounded-0 border-black",{"border-secondary shadow-lg":r.selected}])},[o("a",{href:r.image,target:"_blank"},[v(o("img",wi,null,512),[[i,r.image]])],8,bi),r.title||r.description?(d(),a("div",Fi,[r.title?(d(),a("h6",ki,u(r.title||"не указано"),1)):p("",!0),r.description?(d(),a("p",$i,u(r.description||"не указано"),1)):p("",!0)])):p("",!0)],2)]))),256))])])):p("",!0),(e.doorForm.handle_holes_type.variants||[]).length===0&&e.doorForm.need_handle_holes?(d(),a("div",Ci,Di)):p("",!0),e.doorForm.need_handle_holes&&e.doorForm.handle_holes.id!==3?(d(),a("div",Si,[o("div",Ii,[v(o("select",{class:"form-select","onUpdate:modelValue":t[44]||(t[44]=r=>e.doorForm.service_handle=r),id:"door-service-painting","aria-label":"Floating label select example"},[zi,(d(!0),a(w,null,$(e.getServiceByType("service_handle"),r=>(d(),a("option",{value:r},u(r.title||"-"),9,Ui))),256))],512),[[R,e.doorForm.service_handle]]),Mi])])):p("",!0),o("div",Hi,[o("div",ji,[v(o("input",{class:"form-check-input","onUpdate:modelValue":t[45]||(t[45]=r=>e.doorForm.need_upper_jumper=r),type:"checkbox",role:"switch",id:"need-upper-jumper",checked:""},null,512),[[P,e.doorForm.need_upper_jumper]]),Ei])]),o("div",Li,[o("div",Ri,[v(o("input",{class:"form-check-input",type:"checkbox",onChange:t[46]||(t[46]=r=>e.swapDoorstepStopper(0)),"onUpdate:modelValue":t[47]||(t[47]=r=>e.doorForm.need_automatic_doorstep=r),role:"switch",id:"need-automatic-doorstep",checked:""},null,544),[[P,e.doorForm.need_automatic_doorstep]]),Ti])]),e.doorForm.need_automatic_doorstep?(d(),a("div",Pi,[o("div",qi,[v(o("select",{class:"form-select","onUpdate:modelValue":t[48]||(t[48]=r=>e.doorForm.service_doorstep=r),id:"door-service-doorstep","aria-label":"Floating label select example"},[(d(!0),a(w,null,$(e.getServiceByType("service_doorstep"),r=>(d(),a("option",{value:r},u(r.title||"-"),9,Ai))),256))],512),[[R,e.doorForm.service_doorstep]]),Oi])])):p("",!0),o("div",Bi,[o("div",Ni,[v(o("input",{class:"form-check-input",type:"checkbox",role:"switch",onChange:t[49]||(t[49]=r=>e.swapDoorstepStopper(1)),"onUpdate:modelValue":t[50]||(t[50]=r=>e.doorForm.need_hidden_stopper=r),id:"need-hidden-stopper",checked:""},null,544),[[P,e.doorForm.need_hidden_stopper]]),Wi])]),e.doorForm.need_hidden_stopper?(d(),a("div",Qi,[o("div",Gi,[v(o("select",{class:"form-select","onUpdate:modelValue":t[51]||(t[51]=r=>e.doorForm.service_stopper=r),id:"door-service-stopper","aria-label":"Floating label select example"},[(d(!0),a(w,null,$(e.getServiceByType("service_stopper"),r=>(d(),a("option",{value:r},u(r.title||"-"),9,Ji))),256))],512),[[R,e.doorForm.service_stopper]]),Ki])])):p("",!0),o("div",Xi,[o("div",Yi,[v(o("input",{class:"form-check-input","onUpdate:modelValue":t[52]||(t[52]=r=>e.doorForm.need_hidden_door_closer=r),type:"checkbox",role:"switch",id:"need-hidden-door-closer",checked:""},null,512),[[P,e.doorForm.need_hidden_door_closer]]),Zi])]),e.doorForm.need_hidden_door_closer?(d(),a("div",xi,[o("div",ed,[v(o("select",{class:"form-select","onUpdate:modelValue":t[53]||(t[53]=r=>e.doorForm.service_door_closer=r),id:"door-service-door_closer","aria-label":"Floating label select example"},[(d(!0),a(w,null,$(e.getServiceByType("service_door_closer"),r=>(d(),a("option",{value:r},u(r.title||"-"),9,od))),256))],512),[[R,e.doorForm.service_door_closer]]),td])])):p("",!0),o("div",sd,[o("div",ld,[v(o("input",{class:"form-check-input","onUpdate:modelValue":t[54]||(t[54]=r=>e.doorForm.need_hidden_skirting_board=r),type:"checkbox",role:"switch",id:"need-hidden-skirting-board",checked:""},null,512),[[P,e.doorForm.need_hidden_skirting_board]]),rd])]),o("div",id,[o("div",dd,[v(o("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[55]||(t[55]=r=>e.doorForm.need_door_install=r),role:"switch",id:"need-door-install",checked:""},null,512),[[P,e.doorForm.need_door_install]]),nd])]),o("div",ad,[o("div",cd,[v(o("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[56]||(t[56]=r=>e.doorForm.need_wrapper=r),role:"switch",id:"need-door-wrapper",checked:""},null,512),[[P,e.doorForm.need_wrapper]]),hd])])])):p("",!0)]),o("div",pd,[o("div",_d,[e.loadedParams?(d(),A(We,{key:0,modelValue:e.doorForm,"onUpdate:modelValue":t[57]||(t[57]=r=>e.doorForm=r)},null,8,["modelValue"])):p("",!0),o("div",ud,[o("div",fd,[md,o("h6",vd,u(e.doorForm.purpose||"Дверь")+":"+u(e.shortDoorTitle)+" "+u(e.doorForm.width||0)+"x"+u(e.doorForm.height||0)+"x"+u(((l=e.doorForm.opening_type)==null?void 0:l.depth)||0),1),o("h6",gd,[(n=e.doorForm.box_and_frame_color)!=null&&n.title?(d(),a("span",yd,"("+u(e.doorForm.box_and_frame_color.ral_code||e.doorForm.box_and_frame_color.title)+"),",1)):p("",!0),(c=e.doorForm.front_side_finish_color)!=null&&c.title?(d(),a("span",bd,"первая сторона "+u((h=e.doorForm.front_side_finish)==null?void 0:h.title)+" цвет "+u(e.doorForm.front_side_finish_color.ral_code||e.doorForm.front_side_finish_color.title)+",",1)):p("",!0),(f=e.doorForm.back_side_finish_color)!=null&&f.title?(d(),a("span",wd,"/вторая сторона "+u((m=e.doorForm.back_side_finish)==null?void 0:m.title)+" цвет "+u(e.doorForm.back_side_finish_color.ral_code||e.doorForm.back_side_finish_color.title)+",",1)):p("",!0),(C=e.doorForm.loops)!=null&&C.title?(d(),a("span",Fd,"петли "+u((y=e.doorForm.hinge_manufacturer)==null?void 0:y.title)+" "+u(e.doorForm.loops.title)+" ("+u(e.doorForm.loops_count||0)+" шт.)",1)):p("",!0),(_=e.doorForm.fittings_color)!=null&&_.title?(d(),a("span",kd,"цвет "+u(e.doorForm.fittings_color.ral_code||e.doorForm.fittings_color.title)+",",1)):p("",!0),(b=e.doorForm.opening_type)!=null&&b.title?(d(),a("span",$d,u(e.doorForm.opening_type.title)+",",1)):p("",!0),(D=e.doorForm.opening_type)!=null&&D.depth?(d(),a("span",Cd,"Толщина профиля "+u((I=e.doorForm.opening_type)==null?void 0:I.depth)+" мм,",1)):p("",!0),e.doorForm.need_upper_jumper?p("",!0):(d(),a("span",Vd,"без верх. перемычки,")),e.doorForm.need_automatic_doorstep?(d(),a("span",Dd,"Автоматический порог,")):p("",!0),e.doorForm.need_hidden_stopper?(d(),a("span",Sd,"Скрытый стопор,")):p("",!0),e.doorForm.need_hidden_door_closer?(d(),a("span",Id,"Скрытый доводчик,")):p("",!0),e.doorForm.need_hidden_skirting_board?(d(),a("span",zd,"Скрытый плинтус,")):p("",!0),e.doorForm.need_door_install?(d(),a("span",Ud,"Установка двери,")):p("",!0),e.doorForm.need_handle_holes?(d(),a("span",Md,[F(u(e.doorForm.handle_holes.title)+" ",1),e.doorForm.handle_holes_type.title!==null?(d(),a("span",Hd,": ручка в наличии")):p("",!0),e.doorForm.handle_wrapper_type.title!==null?(d(),a("span",jd,", завертка в наличии")):p("",!0)])):p("",!0)])])]),e.tmp_prices.length>0?(d(),a("div",Ed,[o("div",Ld,[o("table",Rd,[o("tbody",null,[(d(!0),a(w,null,$(e.tmp_prices,r=>(d(),a("tr",null,[o("td",null,[F(u(e.type_dictionary[r.type]||r.type)+" ",1),e.doorForm[r.type]?(d(),a(w,{key:0},[Td,e.doorForm[r.type].description?(d(),a("small",Pd,"("+u(e.doorForm[r.type].description)+")",1)):p("",!0)],64)):p("",!0)]),o("td",null,[F(u(r.price||0)+" руб. ",1),r.full_price?(d(),a(w,{key:0},[qd,o("small",null,"("+u(r.full_price||0)+" руб.)",1)],64)):p("",!0)])]))),256))])])])])):p("",!0)])]),o("div",Ad,[o("div",Od,[o("div",{class:k({"col-md-2":e.doorForm.price_type.id===3,"col-md-4":e.doorForm.price_type.id!==3})},[o("div",Bd,[v(o("select",{class:"form-select","onUpdate:modelValue":t[58]||(t[58]=r=>e.doorForm.price_type=r),onInvalid:t[59]||(t[59]=r=>e.alert("Вы не выбрали тип цены!")),id:"door-type","aria-label":"door-type",required:""},[(d(!0),a(w,null,$(e.getDictionary.price_type_variants,r=>(d(),a("option",{value:r},u(r.title),9,Nd))),256))],544),[[R,e.doorForm.price_type]]),Wd])],2),e.doorForm.price_type.id===3?(d(),a("div",Qd,[o("div",Gd,[v(o("input",{type:"number",min:"0",onInvalid:t[60]||(t[60]=r=>e.alert("Вы не ввели процент дилера!")),"onUpdate:modelValue":t[61]||(t[61]=r=>e.doorForm.dealer_percent=r),class:"form-control text-center",id:"floatingInput",required:""},null,544),[[V,e.doorForm.dealer_percent]]),Jd])])):p("",!0),o("div",Kd,[o("button",{type:"button",onClick:t[62]||(t[62]=r=>e.changeDoorCount("sub")),class:"btn btn-dark rounded-0 mr-2 px-3"},Yd),o("div",Zd,[v(o("input",{type:"number",onInvalid:t[63]||(t[63]=r=>e.alert("Вы не указали количество дверей")),"onUpdate:modelValue":t[64]||(t[64]=r=>e.doorForm.count=r),min:"1",value:"1",class:"form-control rounded-0 text-center"},null,544),[[V,e.doorForm.count]])]),o("button",{type:"button",onClick:t[65]||(t[65]=r=>e.changeDoorCount("add")),class:"btn btn-dark rounded-0 ml-2 px-3"},en)]),o("div",on,[o("p",tn,u(e.resultPrice)+"х"+u(e.doorForm.count)+"="+u(e.resultPrice*e.doorForm.count)+"₽",1)]),o("div",sn,[o("button",{disabled:!e.doorForm.price_type.key,class:"btn btn-dark rounded-0 w-100"},[rn,F(" Сохранить ")],8,ln)])])]),o("div",dn,[e.messages.length>0?(d(!0),a(w,{key:0},$(e.messages,(r,g)=>(d(),a("div",{onClick:z=>e.removeMessage(g),class:"alert alert-danger alert-dismissible fade show my-2",role:"alert"},[an,F(" "+u(r||"Ошибка"),1)],8,nn))),256)):p("",!0)])],32)):(d(),a("div",cn,pn)),o("div",_n,[o("div",un,[o("div",fn,[o("div",mn,[vn,o("h3",gn,u(e.confirm.title||"-"),1),o("p",yn,u(e.confirm.message||"-"),1),o("div",bn,[o("div",wn,[o("button",{class:"btn btn-dark rounded-0 w-100",type:"button",onClick:t[67]||(t[67]=(...r)=>e.clearForm&&e.clearForm(...r))},"Да, очистить ")]),o("div",Fn,[o("button",{class:"btn btn-outline-secondary rounded-0 w-100",onClick:t[68]||(t[68]=r=>e.confirmModal.hide())},"Нет, не очищать ")])])])])])]),o("div",{class:"modal fade",id:"finish-front-variant-modal-"+e.doorForm.id,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[o("div",$n,[o("div",Cn,[Vn,o("div",Dn,[W(le,{item:e.doorForm.front_side_finish,"onUpdate:item":t[69]||(t[69]=r=>e.doorForm.front_side_finish=r)},null,8,["item"])]),Sn])])],8,kn),o("div",{class:"modal fade",id:"finish-back-variant-modal-"+e.doorForm.id,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[o("div",zn,[o("div",Un,[Mn,o("div",Hn,[W(le,{item:e.doorForm.back_side_finish,"onUpdate:item":t[70]||(t[70]=r=>e.doorForm.back_side_finish=r)},null,8,["item"])]),jn])])],8,In),o("div",En,[o("div",Ln,[o("div",Rn,[Tn,o("div",Pn,[e.selectedHandle?(d(),A(ue,{key:0,"selected-handle":e.selectedHandle},null,8,["selected-handle"])):p("",!0)])])])])],64)}}});export{We as _,Wn as a,he as u};
